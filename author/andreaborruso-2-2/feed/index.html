<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:gml="http://www.opengis.net/gml"

	xmlns:media="http://search.yahoo.com/mrss/"
	>

<channel>
	<title>TANTO &#187; Andrea Borruso</title>
	<atom:link href="http://blog.spaziogis.it/author/andreaborruso-2-2/feed/" rel="self" type="application/rss+xml" />
	<link>http://blog.spaziogis.it</link>
	<description>le cose che ci piacciono ...</description>
	<lastBuildDate>Mon, 07 Nov 2016 09:59:24 +0000</lastBuildDate>
	<language>it-IT</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<xhtml:meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="robots" content="noindex" />
		<item>
		<title>GTFS, pronti, partenza, via &#8230;</title>
		<link>http://blog.spaziogis.it/2016/08/24/gtfs-pronti-partenza-via/</link>
		<comments>http://blog.spaziogis.it/2016/08/24/gtfs-pronti-partenza-via/#comments</comments>
		<pubDate>Wed, 24 Aug 2016 06:00:50 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Strumenti]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[GTFS]]></category>
		<category><![CDATA[script]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6973</guid>
		<description><![CDATA[	
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=GTFS%2C+pronti%2C+partenza%2C+via+%26%238230%3B&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Strumenti&amp;rft.source=TANTO&amp;rft.date=2016-08-24&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2016/08/24/gtfs-pronti-partenza-via/&amp;rft.language=English"></span>
Introduzione Il GTFS è un formato nato per definire orari e informazioni geografiche legate a reti pubbliche e private di trasporto. E’ nato in sintesi estrema (qui più dettagli) come side project di un dipendente di Google che nel 2005 stava cercando un modo per standardizzare l’importazione di dati di questo tipo in Google Maps. [...]]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=GTFS%2C+pronti%2C+partenza%2C+via+%26%238230%3B&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Strumenti&amp;rft.source=TANTO&amp;rft.date=2016-08-24&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2016/08/24/gtfs-pronti-partenza-via/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<h2 id="introduzione">Introduzione</h2>
	<p>Il <code>GTFS</code> è un formato nato per definire orari e informazioni geografiche legate a reti pubbliche e private di trasporto. E’ nato in sintesi estrema (<a href="http://sf.streetsblog.org/2010/01/05/how-google-and-portlands-trimet-set-the-standard-for-open-transit-data/">qui</a> più dettagli) come <em>side project</em> di un dipendente di Google che nel 2005 stava cercando un modo per standardizzare l’importazione di dati di questo tipo in Google Maps. Non c’era ancora uno standard in questo settore, e nel tempo il GTFS è diventato il formato di riferimento, grazie anche all’uso diffuso e alla sua documentazione.</p>
	<p>Si tratta di una collezione di file <code>CSV</code> (con estensione <code>.txt</code>) &#8211; da un minimo di 6 a un massimo di 13 &#8211; archiviati all’interno di un file <code>zip</code>, le cui specifiche sono documentate qui: <a href="https://developers.google.com/transit/gtfs/reference/">https://developers.google.com/transit/gtfs/reference/</a></p>
	<p>Per varie ragioni è un formato con cui ho spesso a che fare, ed è stato di ispirazione per creare uno <em>script</em> che ho scritto durante le bellissime olimpiadi di Rio e che ho chiamato <strong>GTFS, ready, set, go</strong>.</p>
	<h2 id="cosa-è-gtfs-ready-set-go">Cosa è GTFS, ready, set, go</h2>
	<p>È uno script <em>bash</em> che fa essenzialmente una cosa: trasforma i file <code>txt</code> del GTFS in formati <strong>pronti</strong> per essere <strong>usati meglio</strong> e <strong>subito</strong>, sopratutto in <strong>applicazioni spaziali</strong>. Nel dettaglio:</p>
	<ul>
	<li>scarica una sorgente dati GTFS e ne converte i file <code>txt</code> in tabelle di un DBMS con estensione spaziale e in particolare in formato <strong><a href="http://www.gaia-gis.it/gaia-sins/">spatialite</a></strong> (evviva <strong>Alessandro Furieri </strong>e tutti quelli che si prendono cura di spatialite);
	<ul>
	<li>trasforma in layer cartografici le tabelle delle fermate e delle rotte (<code>stops</code> e <code>routes</code>);</li>
	<li>genera alcuna tabelle utili a creare un report sul file della reti di trasporti preso in esame;</li>
	</ul>
	</li>
	<li>esporta in formato <code>GeoJSON</code> e <code>KML</code> la tabella delle rotte e quella delle fermate;</li>
	<li>genera un report in formato <code>HTML</code> e <code>Markdown</code> utili a dare una visione d’insieme dei dati in esame (al momento è ancora minimale e in bozza) .</li>
	</ul>
	<p>Nulla di complesso e nulla di nuovo. Ci sono già altre modalità e prodotti per fare cose simili, ma sono scritti in linguaggi che non conosco (ad esempio in <a href="https://github.com/harrytruong/gtfs-sqlite">Go</a>), richiedono l’installazione di un database server o non spazializzano database sqlite (come il mio amato <a href="https://github.com/OpenTransitTools/gtfsdb">GTFSDB</a>) o sono procedure (semplici) da svolgere “a mano” e quindi a rischio sempre di qualche errore e con perdite di tempo (come ad esempio <a href="http://www.stevencanplan.com/2016/02/converting-a-transit-agencys-gtfs-to-shapefile-and-geojson-with-qgis/">questa</a>).</p>
	<p>Qui il repository su <strong>GitHub</strong>: <a href="https://github.com/ondata/gtfsreadysetgo" target="_blank">https://github.com/ondata/gtfsreadysetgo</a></p>
	<h2 id="come-funziona">Come funziona</h2>
	<p>Si tratta di uno script in cui ho messo in fila i comandi utili al mio obiettivo finale, costruendo una (sorta di) macro in cui sfrutto le caratteristiche del <code>bash</code> e alcune <em>utility</em>/applicazioni utili per arrivare al risultato atteso. Queste ultime sono al momento un requisito per lo script, e quindi una piccola barriera ad un utilizzo immediato: le ho utilizzate perché mi hanno consentito di non scrivere “vero” codice, perché “fanno” nella sostanza tutto loro.</p>
	<h3 id="requisiti">Requisiti</h3>
	<p>Avere un sistema operativo in cui è possibile lanciare uno script bash, quindi ovviamente i sistemi Linux, quelli Mac e anche quelli Windows. Su quest’ultimo apro una piccola parentesi.</p>
	<p>Per lanciare uno script bash su Windows &#8211; sino a poco tempo fa &#8211; era necessario installare “cose” come <a href="https://www.cygwin.com/">Cygwin</a>.</p>
	<blockquote><p>Cygwin è una distribuzione di software libero, sviluppata originariamente da Cygnus Solutions, che consente a diverse versioni di Microsoft Windows di svolgere alcuni compiti in maniera esteticamente e funzionalmente simile ad un sistema Unix (da <a href="https://it.wikipedia.org/wiki/Cygwin">Wikipedia</a>).</p></blockquote>
	<p>Dall’ultimo aggiornamento di release di Windows 10 (l’<em>anniversary update</em> di agosto 2016) è possibile utilizzare nativamente <em>bash</em> anche in Windows, tramite l’applicazione denominata “<a href="http://www.hanselman.com/blog/DevelopersCanRunBashShellAndUsermodeUbuntuLinuxBinariesOnWindows10.aspx">Bash in Ubuntu on Windows</a>”; “GTFS ready set go” l’ho scritto e testato per intero in ambiente Windows 10, anche per provare questa novità introdotta in questo recente aggiornamento, che rende la comodità e la potenza di fuoco di <em>bash</em> sempre più trasversali.</p>
	<p><img class="alignnone size-full wp-image-6976 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2016/08/bash.png" alt="bash" width="500" height="217" /></p>
	<p>Lo script sfrutta queste applicazioni:</p>
	<ul>
	<li><a href="http://www.gdal.org/">GDAL</a> &#8211; Geospatial Data Abstraction Library &gt;= 2.1, che viene usato essenzialmente per le operazioni di creazione, importazione e esportazione delle risorse;</li>
	<li><a href="https://www.gaia-gis.it/fossil/spatialite-tools/index">spatialite</a>, che viene sfruttato per fare query spaziali e come uno dei formati di archiviazione e output;</li>
	<li>unzip, per decomprimere il GTFS sorgente;</li>
	<li><a href="https://curl.haxx.se/">curl</a>, per il download del file GTFS;</li>
	<li><a href="https://github.com/shenwei356/csvtk">csvtk</a>, per convertire in formato Markdown alcune delle tabelle create;</li>
	<li><a href="http://pandoc.org/">pandoc</a>, per convertire il report Markdown anche in formato HTML.</li>
	</ul>
	<p>E infine vengono utilizzate gli straordinari <code>grep</code> e <code>sed</code>, che sono sempre presenti in ambienti in cui è possibile lanciare uno script <code>bash</code>.</p>
	<h3 id="usare-lo-script">Usare lo script</h3>
	<p>Questa la modalità attuale di utilizzo:</p>
	<ul>
	<li><a href="https://codeload.github.com/ondata/gtfsreadysetgo/zip/master">scaricare</a> (o clonare) il <em>repository</em> e decomprimere in una cartella il file zip scaricato;</li>
	<li>dare allo script <code>.sh</code> i permessi di esecuzione;</li>
	<li>aprirlo con un editor di testo e cercare la variabile <code>URLGTFS</code>;</li>
	<li>sostituire l’URL presente con l’URL di un feed GTFS di proprio interesse (un comodo archivio di GTFS è <a href="https://transitfeeds.com/l/60-europe">TransitFeeds</a>) come ad esempio quello di Madrid <a href="https://servicios.emtmadrid.es:8443/gtfs/transitemt.zip;">https://servicios.emtmadrid.es:8443/gtfs/transitemt.zip;</a></li>
	<li>salvare e lanciare lo script via shell.</li>
	</ul>
	<p>Qui sotto la replica di quanto descritto nei punti di sopra.</p>
	<p><a href="https://www.youtube.com/watch?v=rkC4r_BwXI4" target="_blank"><img class="alignnone size-full wp-image-6978 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2016/08/2016-08-23_10h31_39.png" alt="2016-08-23_10h31_39" width="500" height="283" /></a></p>
	<h3 id="alcune-note">Alcune note</h3>
	<p>Lo script può essere migliorato e di molto. Per questa ragione inserisco alcune importanti note:</p>
	<ul>
	<li>lo script <strong>non fa la verifica dei requisiti software</strong> (vedi sopra), quindi se non soddisfatti andrà in errore;</li>
	<li>lo script è utilizzabile al momento soltanto con i <strong>GTFS</strong> che <strong>contengono</strong> anche la <strong>tabella</strong> <a href="https://developers.google.com/transit/gtfs/reference/shapes-file" target="_blank"><code>shapes</code></a>, che è opzionale per il formato GTFS, quindi non sempre presente;</li>
	<li>lo script non fa alcuna <strong>verifica</strong> di <strong>consistenza</strong> dei <strong>dati</strong> (per la quale è possibile utilizzare <a href="https://github.com/google/transitfeed/wiki/FeedValidator">FeedValidator</a>;</li>
	<li>lo script crea e cancella file e cartelle nella cartella in cui viene eseguito.</li>
	</ul>
	<h2 id="gli-output">Gli output</h2>
	<p>Sopra ho già fatto riferimento agli output. Nel <em>repository</em> oltre allo script è stata creata la cartella <code>output_example_folder</code> per mostrare nel concreto quali siano gli output prodotti. A seguire l’elenco dei vari output con i relativi URL, in modo da potersi fare un’idea più concreta:</p>
	<ul>
	<li><code>feed_gtfs.sqlite</code> <a href="https://cdn.rawgit.com/ondata/gtfsreadysetgo/master/output_example_folder/feed_gtfs.sqlite">download</a>, ovvero il file GTFS trasformato in formato SpatiaLite, in cui le tabelle <code>stops</code> e <code>routes</code> sono state trasformate in layer spaziali;</li>
	<li><code>routes.geojson</code> (<a href="https://github.com/ondata/gtfsreadysetgo/blob/master/output_example_folder/routes.geojson">visualizzazione</a> e <a href="https://cdn.rawgit.com/ondata/gtfsreadysetgo/master/output_example_folder/routes.geojson">download</a>), il file in formato GeoJSON per le rotte;</li>
	<li><code>routes.kml</code> (<a href="https://cdn.rawgit.com/ondata/gtfsreadysetgo/master/output_example_folder/routes.kml">download</a>), file in formato KML per le rotte, visualizzabile in Google Earth (ed in altri client);</li>
	<li><code>stops.geojson</code> (<a href="https://github.com/ondata/gtfsreadysetgo/blob/master/output_example_folder/stops.geojson">visualizzazione</a> e <a href="https://cdn.rawgit.com/ondata/gtfsreadysetgo/master/output_example_folder/stops.geojson">download</a>), il file in formato GeoJSON per le fermate;</li>
	<li><code>stops.kml</code> (<a href="https://cdn.rawgit.com/ondata/gtfsreadysetgo/master/output_example_folder/stops.kml">download</a>), file in formato KML per le fermate, visualizzabile in Google Earth (ed in altri client);</li>
	<li>la cartella <code>report</code>(<a href="https://github.com/ondata/gtfsreadysetgo/tree/master/output_example_folder/report">visualizza</a>), che a sua volta contiene:
	<ul>
	<li><code>report.md</code>, il file con il report in formato Markdown (<a href="https://github.com/ondata/gtfsreadysetgo/blob/master/output_example_folder/report/report.md">visualizza</a>)</li>
	<li><code>report.html</code>, il file con il report in formato HTML (<a href="https://github.com/ondata/gtfsreadysetgo/blob/master/output_example_folder/report/report.html">vista codice</a> e <a href="https://ondata.github.io/gtfsreadysetgo/report.html">rendering HTML</a>);</li>
	<li>tutte le tabelle usate per costruire i report, in formato CSV e Markdown.</li>
	</ul>
	</li>
	</ul>
	<h2 id="perché">Perché</h2>
	<p><strong>GTFS, ready, set, go</strong> nasce come conseguenza di <a href="https://www.facebook.com/groups/openamat">#openamat</a>, un’iniziativa civica (ancora in corso) per chiedere a AMAT (la municipalizzata comunale di Palermo che gestisce il trasporto pubblico) di pubblicare i dati relativi ai trasporti pubblici in formato aperto ed in tempo reale.</p>
	<p>Dopo 6 mesi senza aggiornare i dati, AMAT ha pubblicato a luglio del 2016 tre aggiornamenti di GTFS in 15 giorni e avevo bisogno di uno script per poter usare e visualizzare subito questi dati.</p>
	<p>Lo rendo pubblico perché penso possa essere utile anche ad altri.</p>
	<h2 id="url-che-mi-sono-stati-utili">URL (che mi sono stati) utili</h2>
	<ul>
	<li><a href="http://blog.openplans.org/2012/08/the-openplans-guide-to-gtfs-data/">The OpenPlans Guide to GTFS Data</a>;</li>
	<li><a href="https://github.com/napo/osm_users_stats_italian_province">osm_users_stats_italian_province</a>;</li>
	<li><a href="https://github.com/WorldBank-Transport/GTFS-Training-Materials">GTFS-Training-Materials</a>;</li>
	<li><a href="https://github.com/OpenTransitTools/gtfsdb">GTFSDB</a>;</li>
	<li><a href="http://lin-ear-th-inking.blogspot.it/2011/10/extracting-gtfs-data-using-jeql.html">Extracting GTFS data using JEQL</a>;</li>
	<li><a href="https://github.com/google/transitfeed/wiki">TransitFeed library</a>.</li>
	</ul>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2016/08/24/gtfs-pronti-partenza-via/">GTFS, pronti, partenza, via &#8230;</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2016/08/24/gtfs-pronti-partenza-via/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=GTFS%2C+pronti%2C+partenza%2C+via+%26%238230%3B&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Strumenti&amp;rft.source=TANTO&amp;rft.date=2016-08-24&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2016/08/24/gtfs-pronti-partenza-via/&amp;rft.language=English"></span>

		<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2016/08/bash-150x150.png" />
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2016/08/bash.png" medium="image">
			<media:title type="html">bash</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2016/08/bash-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2016/08/2016-08-23_10h31_39.png" medium="image">
			<media:title type="html">2016-08-23_10h31_39</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2016/08/2016-08-23_10h31_39-150x150.png" />
		</media:content>
	</item>
		<item>
		<title>Transitland, per mettere insieme e &#8220;dare vita&#8221; ai dati sui trasporti</title>
		<link>http://blog.spaziogis.it/2016/03/02/transiland-per-mettere-insieme-e-dare-vita-ai-dati-sui-trasporti/</link>
		<comments>http://blog.spaziogis.it/2016/03/02/transiland-per-mettere-insieme-e-dare-vita-ai-dati-sui-trasporti/#comments</comments>
		<pubDate>Wed, 02 Mar 2016 15:23:02 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Strumenti]]></category>
		<category><![CDATA[api]]></category>
		<category><![CDATA[GTFS]]></category>
		<category><![CDATA[opendata]]></category>
		<category><![CDATA[trasporti]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6857</guid>
		<description><![CDATA[	
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Transitland%2C+per+mettere+insieme+e+%26%238220%3Bdare+vita%26%238221%3B+ai+dati+sui+trasporti&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Strumenti&amp;rft.source=TANTO&amp;rft.date=2016-03-02&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2016/03/02/transiland-per-mettere-insieme-e-dare-vita-ai-dati-sui-trasporti/&amp;rft.language=English"></span>
Da novembre è attivo Transit.land, un progetto sponsorizzato da Mapzen che ha come obiettivo quello di creare un catalogo “integrato” di dati sulle reti di trasporto di tutto il mondo. Nasce da una sperimentazione fatta a San Francisco, città con più di 30 agenzie di trasporto pubblico, un numero crescente di servizi privati, il carpooling, [...]]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Transitland%2C+per+mettere+insieme+e+%26%238220%3Bdare+vita%26%238221%3B+ai+dati+sui+trasporti&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Strumenti&amp;rft.source=TANTO&amp;rft.date=2016-03-02&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2016/03/02/transiland-per-mettere-insieme-e-dare-vita-ai-dati-sui-trasporti/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<p>Da novembre è attivo <a href="https://transit.land/"><strong>Transit.land</strong></a>, un progetto sponsorizzato da <a href="https://mapzen.com/"><strong>Mapzen</strong></a> che ha come obiettivo quello di creare un <strong>catalogo</strong> “integrato” di dati sulle <strong>reti di trasporto</strong> di <strong>tutto il mondo</strong>.</p>
	<p>Nasce da una sperimentazione fatta a San Francisco, città con <strong>più di 30 agenzie di trasporto pubblico</strong>, un numero crescente di servizi privati, il carpooling, ecc.. L&#8217;obiettivo era proprio quello di <strong>mettere a rete</strong> tutti questi dati e catalogare le informazioni su autobus, treni, tram, traghetti anche le funivie e renderli interrogabili come se fossero in <strong>un unico database</strong>.</p>
	<p><img class="aligncenter size-full wp-image-6858" src="http://blog.spaziogis.it/wp-content/uploads//2016/03/multi_modale.png" alt="multi_modale" width="500" height="378" /></p>
	<p>Tutto talmente bello, che dopo la sperimentazione &#8220;locale&#8221; è partito il progetto globale, con l&#8217;obiettivo di mettere a catalogo file <strong>GTFS</strong> da tutto il mondo.<br />
La scelta del formato file di input è caduta proprio su <a href="http://www.transitwiki.org/TransitWiki/index.php?title=General_Transit_Feed_Specification">General Transit Feed Specification</a>, oggi lo standard di fatto per questo tipo di dati, usato da Google Maps, Microsoft Bing Maps, Apple Maps, ecc. Molti operatori di servizi di trasporto pubblicano i dati in questo formato, e molti innovatori civici hanno creato questi file per le loro città.</p>
	<p>Ma si tratta di risorse che per lo più fluttuano nel web spesso come elementi separati. Transitlad, ancora invero in uno stato iniziale, mira a diventare un <strong>centro di gravità</strong> per questi <strong>dataset</strong>, completamente <strong>aperto</strong> in termini di licenza di <a href="https://github.com/transitland"><strong>software</strong></a> e di <strong>dati</strong>.</p>
	<h2 id="contribuire">Contribuire</h2>
	<p>Uno dei modi per contribuire al progetto, lanciato da poco, è quello di <strong>inviare una nuova sorgente di dati GTFS</strong>, in modo che possa essere integrata al <a href="https://transit.land/feed-registry/"><strong>catalogo generale</strong></a>, che oggi comprende più di 70 risorse.<br />
Farlo è molto semplice: a partire da <a href="https://transit.land/feed-registry/feeds/new"><strong>questo wizard</strong></a> dove viene richiesto essenzialmente di inserire l&#8217;<strong>URL</strong> della sorgente dati, il tipo di <strong>licenza</strong> con cui sono pubblicati ed alcune informazioni anagrafiche del mittente.<br />
Il dataset, a quel punto, viene sottoposto ad una verifica e dopo qualche giorno verrà inserito in catalogo.</p>
	<p>Un po&#8217; per testare l&#8217;oggetto, un po&#8217; perché mi sembra un gran bella idea &#8211; non nuova, ma mai pienamente realizzata &#8211; mi sono messo all&#8217;opera e nel catalogo Trantit.land oggi sono in eleno le &#8220;nostre&#8221;:</p>
	<ul>
	<li><a href="https://transit.land/feed-registry/operators/o-sqc2-amatpalermospa">Palermo</a>;</li>
	<li><a href="https://transit.land/feed-registry/operators/o-s-aziendanapoletanamobilit">Napoli</a>;</li>
	<li><a href="https://transit.land/feed-registry/operators/o-sr2-romaserviziperlamobilitsrl">Roma</a>;</li>
	<li><a href="https://transit.land/feed-registry/operators/o-u0pv-trentinotrasportieserciziospa">Trento</a>.</li>
	</ul>
	<h2 id="le-api-e-la-vita-dei-dati">Le API e la &#8220;vita&#8221; dei dati</h2>
	<p>I dati, come dice spesso chi fa didattica su questi temi, sono come la farina e l&#8217;acqua: materia prima con cui c&#8217;è chi farà torte e chi &#8220;busiate&#8221; (io non ho dubbi).</p>
	<p><img class="size-full wp-image-6859 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2016/03/busiate.png" alt="busiate" width="500" height="323" /></p>
	<p>A Transit.land hanno impastato tutto e invece hanno tirato fuori delle <strong>API</strong>, rendendo l&#8217;interrogazione del loro catalogo un processo semplice, comodo e che potenzialmente potrà produrre diversi effetti a cascata.</p>
	<p>Qualche esempio di query:</p>
	<ul>
	<li>Tutte le <strong>fermate</strong> di un <strong>operatore</strong>
	<ul>
	<li><a href="https://transit.land/api/v1/stops?servedBy=o-s-aziendanapoletanamobilit" target="_blank">https://transit.land/api/v1/stops?servedBy=o-s-aziendanapoletanamobilit</a></li>
	</ul>
	</li>
	<li>Tutte le <strong>rotte</strong> di un <strong>operatore</strong>
	<ul>
	<li><a href="https://transit.land/api/v1/routes?operatedBy=o-s-aziendanapoletanamobilit" target="_blank">https://transit.land/api/v1/routes?operatedBy=o-s-aziendanapoletanamobilit</a></li>
	</ul>
	</li>
	<li>Tutte le <strong>fermate</strong> nel <strong>raggio</strong> di 500 metri da un punto di <strong>coordinate note</strong>
	<ul>
	<li><a href="https://transit.land/api/v1/stops?lon=14.231413&amp;lat=40.835970&amp;r=500" target="_blank">https://transit.land/api/v1/stops?lon=14.231413&amp;lat=40.835970&amp;r=500</a></li>
	</ul>
	</li>
	<li>Tutte le <strong>fermate</strong> comprese in un <strong>rettangolo</strong> di <strong>coordinate note</strong>
	<ul>
	<li><a href="https://transit.land/api/v1/stops?bbox=14.231413,40.835970,14.239355,40.842158" target="_blank">https://transit.land/api/v1/stops?bbox=14.231413,40.835970,14.239355,40.842158</a></li>
	</ul>
	</li>
	<li>Tutte le <strong>fermate</strong> in cui un certo <strong>tag</strong> è valorizzato (in questo caso ingresso con sedia a rotelle) in <strong>una certa area</strong>
	<ul>
	<li><a href="https://transit.land/api/v1/stops?tag_key=wheelchair_boarding&amp;bbox=-122.4183,37.7758,-122.4120,37.7808" target="_blank">https://transit.land/api/v1/stops?tag_key=wheelchair_boarding&amp;bbox=-122.4183,37.7758,-122.4120,37.7808</a></li>
	</ul>
	</li>
	<li>Tutte le <strong>fermate</strong> che ricadono nella <strong>via</strong> che ha come <strong>OSM ID </strong>il valore 395047052 (Corso Vittorio Emanuele a Napoli)
	<ul>
	<li><a href="https://transit.land/api/v1/stops?tag_key=osm_way_id&amp;tag_value=395047052" target="_blank">https://transit.land/api/v1/stops?tag_key=osm_way_id&amp;tag_value=395047052</a></li>
	</ul>
	</li>
	<li>Tutti i <strong>dati</strong> su una determinata <strong>rotta</strong>
	<ul>
	<li><a href="https://transit.land/api/v1/routes?identifier=gtfs://f-s-anm~it/r/100475194" target="_blank">https://transit.land/api/v1/routes?identifier=gtfs://f-s-anm~it/r/100475194</a></li>
	</ul>
	</li>
	<li>Tutte le <strong>rotte</strong> comprese in un <strong>rettangolo</strong> di <strong>coordinate note</strong>
	<ul>
	<li><a href="https://transit.land/api/v1/routes?bbox=14.231413,40.835970,14.239355,40.842158" target="_blank">https://transit.land/api/v1/routes?bbox=14.231413,40.835970,14.239355,40.842158</a></li>
	</ul>
	</li>
	<li>Tutti i dati di un <strong>oggetto</strong> con un determinato<strong> Onestop ID</strong>
	<ul>
	<li><a href="https://transit.land/api/v1/onestop_id/r-sr607-c18" target="_blank">https://transit.land/api/v1/onestop_id/r-sr607-c18</a></li>
	</ul>
	</li>
	</ul>
	<p>Ma sono solo alcuni esempi e le <strong>chiamate disponibili</strong> sono molte di più:<br />
<a class="uri" href="https://github.com/transitland/transitland-datastore#api-endpoints">https://github.com/transitland/transitland-datastore#api-endpoints</a></p>
	<p>I risultati sono esposti con una paginazione di 50 in 50.</p>
	<h2 id="open-data-day">Open Data Day</h2>
	<p>Sabato 5 marzo 2016 è l&#8217;<a href="http://opendataday.org/"><strong>Open Data Day</strong></a>, e una delle sedi sarà la città di Napoli.</p>
	<p>Il bello è che sino a 15 giorni fa i dati sui trasporti di questo comune non erano disponibili ed oggi, solo per il fatto di essere <a href="http://www.comune.napoli.it/flex/cm/pages/ServeBLOB.php/L/IT/IDPagina/29233">stati pubblicati</a> in <strong>formato aperto</strong> e <strong>documentato</strong> sono pure accessibili tramite API. Questo è stato possibile grazie anche a <a href="https://www.facebook.com/ilaria.vitellio"><strong>Ilaria Vitellio</strong></a> che si è spesa personalmente con la pubblica amministrazione locale, che ha risposto prontamente ed ha pubblicato questi dati.</p>
	<p><strong>In bocca al lupo</strong> allora a Ilaria ed a tutti i presenti a <strong>Napoli</strong>, che avranno a disposizione nuova farina e nuovi mattarelli.</p>
	<p>In chiusura una nota personale. Anche i dati sulla mia città, <strong>Palermo</strong>, sono presenti nel catalogo e quindi accessibili via API, ma purtroppo<strong> valgono per fare qualche demo</strong> di qualità.<br />
Si tratta di dati aggiornati a fine dicembre, in cui non è contemplata la nuova rete tranviaria e tutti i grossi cambiamenti che la rete ha subito tra fine 2015 e inizio 2016.<br />
E&#8217; un fatto grave, specie per una città ricca di turisti come Palermo e con grossi problemi di traffico autoveicolare, che non siano ancora disponibili dati aggiornati sui trasporti pubblici.</p>
	<p>Ne riparlerò in un altro post.
</p>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2016/03/02/transiland-per-mettere-insieme-e-dare-vita-ai-dati-sui-trasporti/">Transitland, per mettere insieme e &#8220;dare vita&#8221; ai dati sui trasporti</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2016/03/02/transiland-per-mettere-insieme-e-dare-vita-ai-dati-sui-trasporti/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Transitland%2C+per+mettere+insieme+e+%26%238220%3Bdare+vita%26%238221%3B+ai+dati+sui+trasporti&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Strumenti&amp;rft.source=TANTO&amp;rft.date=2016-03-02&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2016/03/02/transiland-per-mettere-insieme-e-dare-vita-ai-dati-sui-trasporti/&amp;rft.language=English"></span>

		<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2016/03/multi_modale-150x150.png" />
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2016/03/multi_modale.png" medium="image">
			<media:title type="html">multi_modale</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2016/03/multi_modale-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2016/03/busiate.png" medium="image">
			<media:title type="html">busiate</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2016/03/busiate-150x150.png" />
		</media:content>
	</item>
		<item>
		<title>Segnalazione: riviste in open access sui Sistemi Informativi Geografici</title>
		<link>http://blog.spaziogis.it/2015/10/26/segnalazione-riviste-in-open-access-sui-sistemi-informativi-geografici/</link>
		<comments>http://blog.spaziogis.it/2015/10/26/segnalazione-riviste-in-open-access-sui-sistemi-informativi-geografici/#comments</comments>
		<pubDate>Mon, 26 Oct 2015 07:30:28 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Entropia]]></category>
		<category><![CDATA[gis]]></category>
		<category><![CDATA[openaccess]]></category>
		<category><![CDATA[riviste]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6768</guid>
		<description><![CDATA[	
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Segnalazione%3A+riviste+in+open+access+sui+Sistemi+Informativi+Geografici&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Entropia&amp;rft.source=TANTO&amp;rft.date=2015-10-26&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2015/10/26/segnalazione-riviste-in-open-access-sui-sistemi-informativi-geografici/&amp;rft.language=English"></span>
Solo per segnalare un elenco di riviste a tema GIS accessibili in open access, rese quindi accessibili senza restrizioni e barriere (fonte: Springer Open). Buona lettura! P.S. molto interessante questo recente articolo &#8211; Riviste open access in Italia: stato dell&#8217;arte - ovviamente in open access &#160; City, Territory and Architecture Editor-in-Chief: Giovanni Maciocco Society affiliation: Università degli [...]]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Segnalazione%3A+riviste+in+open+access+sui+Sistemi+Informativi+Geografici&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Entropia&amp;rft.source=TANTO&amp;rft.date=2015-10-26&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2015/10/26/segnalazione-riviste-in-open-access-sui-sistemi-informativi-geografici/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<p>Solo per segnalare un elenco di riviste a tema GIS accessibili in <strong><em>open access</em></strong>, rese quindi accessibili senza restrizioni e barriere (fonte: <a href="http://www.springeropen.com/" target="_blank">Springer Open</a>).</p>
	<p>Buona lettura!</p>
	<p>P.S. molto interessante questo recente articolo &#8211; <a href="http://aibstudi.aib.it/article/view/11291/10553" target="_blank">Riviste open access in Italia: stato dell&#8217;art</a>e - ovviamente in open access <img src='http://blog.spaziogis.it/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
	<table width="500" border="0" cellspacing="0" cellpadding="0">
	<tbody>
	<tr>
	<td>
	<table width="500" border="0" cellspacing="0" cellpadding="0">
	<tbody>
	<tr>
	<td valign="top">
	<table width="105" border="0" cellspacing="0" cellpadding="0" align="left">
	<tbody>
	<tr>
	<td><a href="http://news.springer.com/re?l=D0In5y2fuI6hrr38oIb" target="_blank"><br />
<img class="CToWUd" src="https://ci3.googleusercontent.com/proxy/snTHYYdnAlOX0kbo39-3wQkWd0NH2pLRXEvL45F86FufDQprWq46M7QqIxafmREdPju4hVgyeO9qQJzDtCGrdJC_ehjfNvgjEf8LiDGZ=s0-d-e1-ft?safe-img-pbza#https://images.springer.com/sgw/journals/small/40410.jpg" alt="" width="95" height="126" border="0" /><br />
</a></td>
	<td width="10"></td>
	</tr>
	<tr>
	<td colspan="2" height="4"></td>
	</tr>
	</tbody>
	</table>
	<p>&nbsp;</p>
	<p><strong><a href="http://news.springer.com/re?l=D0In5y2fuI6hrr38oIc" target="_blank">City, Territory and Architecture</a></strong></p>
	<p>Editor-in-Chief: Giovanni Maciocco<br />
Society affiliation: <a href="http://www.uniss.it/php/home.php" target="_blank">Università degli Studi Sassari</a>, Italy</p>
	<p>With its focus on the pluralism of positions and project perspectives regarding the city, territory and architecture, this journal aims to open up an interdisciplinary debate on the relational nature of projects for spaces where people settle and interrelate.</p>
	<p>&nbsp;</td>
	</tr>
	</tbody>
	</table>
	</td>
	</tr>
	<tr>
	<td height="10"></td>
	</tr>
	<tr>
	<td><img class="CToWUd" src="https://ci4.googleusercontent.com/proxy/V1a1nLzq1c_WKzr2pRgZGDPX3YzM7is2F2-xAPxsnEcJrlxqW_4S9J6aYdD-71t7XlT0WjTeak-35j0xE_7JOIe4Dms=s0-d-e1-ft?safe-img-pbza#http://www.springer.com/?SGWID=0-0-16-116738-0" alt="separating line" width="524" height="1" border="0" /></td>
	</tr>
	<tr>
	<td height="10"></td>
	</tr>
	<tr>
	<td>
	<table width="500" border="0" cellspacing="0" cellpadding="0">
	<tbody>
	<tr>
	<td valign="top">
	<table width="105" border="0" cellspacing="0" cellpadding="0" align="left">
	<tbody>
	<tr>
	<td><a href="http://news.springer.com/re?l=D0In5y2fuI6hrr38oIe" target="_blank"><br />
<img class="CToWUd" src="https://ci4.googleusercontent.com/proxy/jesMK-jmSrmg1WbCirtL7vCukN7QcYlCR3UZ2cEGHshIokvtcU7QAQqIuzz7evDIqeyrlcqEEC3yU8mks_uJvr7sFtNCylpcrZLBTDCb=s0-d-e1-ft?safe-img-pbza#https://images.springer.com/sgw/journals/small/40984.jpg" alt="" width="95" height="126" border="0" /><br />
</a></td>
	<td width="10"></td>
	</tr>
	<tr>
	<td colspan="2" height="4"></td>
	</tr>
	</tbody>
	</table>
	<p>&nbsp;</p>
	<p><strong><a href="http://news.springer.com/re?l=D0In5y2fuI6hrr38oIf" target="_blank">Future Cities and Environment</a></strong></p>
	<p>Editor-in-Chief: Saffa Riffat<br />
Society affiliation: <a href="http://www.wsset.org/" target="_blank">World Society of Sustainable Energy Technologies</a></p>
	<p>Considering research in the areas of transport, urban planning, architecture and design, and energy and infrastructure, <em>Future Cities and Environment</em> publishes fundamental and applied research, critical reviews and case studies. This includes experimental development, demonstration and computer modelling.</p>
	<p>&nbsp;</td>
	</tr>
	</tbody>
	</table>
	</td>
	</tr>
	<tr>
	<td height="10"></td>
	</tr>
	<tr>
	<td><img class="CToWUd" src="https://ci4.googleusercontent.com/proxy/V1a1nLzq1c_WKzr2pRgZGDPX3YzM7is2F2-xAPxsnEcJrlxqW_4S9J6aYdD-71t7XlT0WjTeak-35j0xE_7JOIe4Dms=s0-d-e1-ft?safe-img-pbza#http://www.springer.com/?SGWID=0-0-16-116738-0" alt="separating line" width="524" height="1" border="0" /></td>
	</tr>
	<tr>
	<td height="10"></td>
	</tr>
	<tr>
	<td>
	<table width="500" border="0" cellspacing="0" cellpadding="0">
	<tbody>
	<tr>
	<td valign="top">
	<table width="105" border="0" cellspacing="0" cellpadding="0" align="left">
	<tbody>
	<tr>
	<td><a href="http://news.springer.com/re?l=D0In5y2fuI6hrr38oIh" target="_blank"><br />
<img class="CToWUd" src="https://ci6.googleusercontent.com/proxy/6BWmESQ4JgqOLtnmxxmbTVWsQ5YMX1q715wpnlllwUzSRXyY-jHEbZxTkBYR7j8w-kpGffnoNojvoYYjCAXs3ACpE_TNGH6EXl9Wrgel=s0-d-e1-ft?safe-img-pbza#https://images.springer.com/sgw/journals/small/13753.jpg" alt="" width="95" height="134" border="0" /><br />
</a></td>
	<td width="10"></td>
	</tr>
	<tr>
	<td colspan="2" height="4"></td>
	</tr>
	</tbody>
	</table>
	<p>&nbsp;</p>
	<p><strong><a href="http://news.springer.com/re?l=D0In5y2fuI6hrr38oIi" target="_blank">International Journal of Disaster Risk Science</a></strong><br />
<em>Indexed by Thomson Reuters</em></p>
	<p>Editor-in-Chief: Yanhua Liu and Roger Kasperson</p>
	<p><em>International Journal of Disaster Risk Science</em> publishes high-quality research articles addressing theoretical and methodological issues in disaster science, emergency response technology, disaster risk management, and large-scale disaster risk governance.</p>
	<p>&nbsp;</td>
	</tr>
	</tbody>
	</table>
	</td>
	</tr>
	</tbody>
	</table>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2015/10/26/segnalazione-riviste-in-open-access-sui-sistemi-informativi-geografici/">Segnalazione: riviste in open access sui Sistemi Informativi Geografici</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2015/10/26/segnalazione-riviste-in-open-access-sui-sistemi-informativi-geografici/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Segnalazione%3A+riviste+in+open+access+sui+Sistemi+Informativi+Geografici&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Entropia&amp;rft.source=TANTO&amp;rft.date=2015-10-26&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2015/10/26/segnalazione-riviste-in-open-access-sui-sistemi-informativi-geografici/&amp;rft.language=English"></span>

		<media:thumbnail url="http://blog.spaziogis.it//images.springer.com/sgw/journals/small/40410.jpg" />
		<media:content url="http://blog.spaziogis.it//images.springer.com/sgw/journals/small/40410.jpg" medium="image" />
		<media:content url="http://blog.spaziogis.it//www.springer.com/?SGWID=0-0-16-116738-0" medium="image">
			<media:title type="html">separating line</media:title>
		</media:content>
		<media:content url="http://blog.spaziogis.it//images.springer.com/sgw/journals/small/40984.jpg" medium="image" />
		<media:content url="http://blog.spaziogis.it//www.springer.com/?SGWID=0-0-16-116738-0" medium="image">
			<media:title type="html">separating line</media:title>
		</media:content>
		<media:content url="http://blog.spaziogis.it//images.springer.com/sgw/journals/small/13753.jpg" medium="image" />
	</item>
		<item>
		<title>Guardian Datastore Explorer: per costruire query su fogli elettronici Google Drive</title>
		<link>http://blog.spaziogis.it/2015/10/06/guardian-datastore-explorer-per-costruire-query-su-fogli-elettronici-google-drive/</link>
		<comments>http://blog.spaziogis.it/2015/10/06/guardian-datastore-explorer-per-costruire-query-su-fogli-elettronici-google-drive/#comments</comments>
		<pubDate>Tue, 06 Oct 2015 06:44:38 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Didattica]]></category>
		<category><![CDATA[api]]></category>
		<category><![CDATA[gdrive]]></category>
		<category><![CDATA[query]]></category>
		<category><![CDATA[SQL]]></category>
		<category><![CDATA[umap]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6753</guid>
		<description><![CDATA[Questo post per presentare Guardian Datastore Explorer, uno strumento per costruire query su fogli elettronici Google Drive, sfruttando il linguaggio di interrogazione messo a disposizione dalle API di GDrive. E ci facciamo pure una mappa.]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Guardian+Datastore+Explorer%3A+per+costruire+query+su+fogli+elettronici+Google+Drive&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Didattica&amp;rft.source=TANTO&amp;rft.date=2015-10-06&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2015/10/06/guardian-datastore-explorer-per-costruire-query-su-fogli-elettronici-google-drive/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<p style="background-color: #eeeeff; border-radius: 5px 5px; -moz-border-radius: 5px 5px; -webkit-border-radius: 5px 5px; padding: 8px 8px 8px 8px; margin: 5px 0px 5px 0px; border: 1px solid #999999; font-family: Verdana,Arial,Helvetica,sans-serif; font-size: 80%;"><strong>NdR</strong>: questo è stato pubblicato originariamente sul sito della <strong><a href="http://school.dataninja.it/welcome/" target="_blank">dataninjaschool</a></strong>.</p>
	<h2 id="introduzione">Introduzione</h2>
	<p>Tra gli strumenti esposti da Google Drive c&#8217;è <strong><a href="https://www.google.com/intl/it_it/sheets/about/">Sheet</a></strong>, un foglio elettronico online ricco di funzioni, molto usato per le professioni e gli utilizzi più svariati.</p>
	<p>I fogli creati fungono spesso da &#8220;<strong>contenitori</strong>&#8221; di dati, che fanno da sorgente a grafici, mappe, infografiche e applicazioni di svariata natura</p>
	<p>L&#8217;accesso a Sheet si può eseguire tramite le <strong>API</strong> ufficiali di interrogazione. Nella <a href="https://developers.google.com/chart/interactive/docs/querylanguage">documentazione ufficiale</a> è indicato come generare un output, come generarne uno filtrato, come impostare i formati di output, come usarlo come un database relazionale su cui fare delle query SQL con aggregazione, calcoli, ecc.. Sul web, oltre alla guida dedicata, numerosi tutorial ed esempi.</p>
	<p>Si tratta di operazioni semplici, con possibilità di uso molto ricche, per uno strumento che è comunque &#8220;<strong>per tutti</strong>&#8220;. Nella mia esperienza da formatore ho riscontrato però che per alcuni, la costruzione di una query non è di immediato apprendimento.<br />
Questo post nasce proprio allo scopo di presentare uno strumento che consente di superare questi ostacoli: il buon vecchio <strong>Guardian Datastore Explorer</strong> di <a href="https://twitter.com/psychemedia">Tony Hirst</a>.</p>
	<h2 id="lo-strumento">Lo strumento</h2>
	<p>Il <strong>Guardian Datastore Explorer</strong> è un vecchietto arzillo: fa la sua prima apparizione nel lontanissimo <strong><a href="http://blog.ouseful.info/2009/05/22/first-steps-towards-a-generic-google-spreadsheets-query-tool/">2009</a></strong>, un&#8217;altra era (non c&#8217;era ad esempio Instagram).<br />
Sono due le caratteristiche principali che lo rendono molto interessante:</p>
	<ul>
	<li>consente facilmente di <strong>costruire in modo guidato</strong> un&#8217;interrogazione su uno Sheet di GDrive;</li>
	<li>è molto <strong>didattico</strong>. Utilizzandolo si impara ad usare il linguaggio di <em>query</em> e dopo poco tempo si impareranno a <strong>scrivere stringhe di interrogazione in autonomia</strong> con un semplice editor di testo.</li>
	</ul>
	<p>E&#8217; uno strumento web ed il suo URL è <a href="http://ouseful.open.ac.uk/datastore/gspreadsheetdb4.php">http://ouseful.open.ac.uk/datastore/gspreadsheetdb4.php</a>.</p>
	<h2 id="come-si-usa">Come si usa</h2>
	<h3 id="predisposizione-del-foglio-google-drive-sheet">Predisposizione del foglio Google Drive Sheet</h3>
	<p>E&#8217; propedeutico avere un account su Google Drive. E poi è necessario avere un foglio elettronico con cui testare il Guardian Datastore Explorer: per le spiegazioni successive verrà utilizzato <a href="https://docs.google.com/spreadsheets/d/1LCAOTXWC5ExNWxFPtMimlG_jdSLgGwRAgrEYgq9iiRc/edit?usp=sharing">questo</a>, con i <strong>musei</strong> del <strong>territorio comunale fiorentino</strong>.</p>
	<p>Si tratta di dati aperti presenti sul portate <a href="http://www.dati.gov.it/dataset/comune-di-firenze_0038">dati.gov.it</a>. Lo sottolineo perché un&#8217;altra cosa abilitata dagli <strong>open data</strong> è la <strong>didattica</strong>.</p>
	<p>La prima cosa da fare con il foglio elettronico, è crearne una <strong>copia</strong>:</p>
	<p><img class="aligncenter" src="http://i.imgur.com/6qWgYXq.png" alt="" /></p>
	<p style="text-align: center;">Fatta la &#8220;vostra&#8221; copia, è necessario impostarne la <strong>condivisione</strong> (tasto &#8220;Condividi&#8221; o &#8220;Share&#8221; in alto a destra), e fare in modo che (<strong>1</strong>) chiunque abbia l&#8217;URL del foglio, (<strong>2</strong>) possa visualizzarlo.<br />
<img class="aligncenter" src="http://i.imgur.com/49N1sAZ.png" alt="" width="500" height="361" /></p>
	<p>Poi si dovrà pubblicare sul web:<br />
<img class="aligncenter" src="http://i.imgur.com/OOtNPHu.png" alt="" /></p>
	<p style="text-align: center;">In questo <strong>video</strong> la sequenza della procedura sopra descritta:<br />
<a href="https://www.youtube.com/watch?v=NPNTDa2YCqk&amp;feature=youtu.be&amp;hd=1"><img class="aligncenter" src="http://i.imgur.com/yeelFlg.png" alt="" width="500" height="281" /></a></p>
	<p>La condivisione e la pubblicazione sul web sono necessarie perché il Guardian Datastore Explorer è utilizzabile soltanto con fogli pubblicamente accessibili.</p>
	<h3 id="costruzione-della-query-sul-del-foglio-elettronico">Costruzione della query sul del foglio elettronico</h3>
	<p>La prima cosa da fare è ricavare il <strong>codice identificativo</strong> del foglio. Si trova all&#8217;interno dell&#8217;URL dello sheet ed è facilmente indetificabile.<br />
Ad esempio nell&#8217;URL sottostante l&#8217;ID del foglio è quello in grassetto:</p>
	<p>http://docs.google.com/spreadsheets/d/<strong>1nS167pnytroD9SQWi0BUa_eFaeCwuWOk1_0GvsBFmsg</strong>/edit#gid=108845820</p>
	<p>Quindi in questo caso è &#8220;<strong>1nS167pnytroD9SQWi0BUa_eFaeCwuWOk1_0GvsBFmsg</strong>&#8220;.</p>
	<p>Poi c&#8217;è aprire la pagina web del <a href="http://ouseful.open.ac.uk/datastore/gspreadsheetdb4.php">Guardian Datastore Explorer</a> e (<strong>1</strong>) inserire l&#8217;ID del foglio e (<strong>2</strong>) fare click su &#8220;Preview table headings&#8221;. In questo modo l&#8217;interrogazione è stata attivata e come risultato vengono visualizzate le (<strong>3</strong>) intestazione delle colonne del foglio.</p>
	<p style="text-align: center;"><img class="aligncenter" src="http://i.imgur.com/uwi9QC9.png" alt="" width="500" height="200" /></p>
	<p>Subito dopo si può andare a <strong>pescare dati</strong> (&#8220;Go Fish&#8221; scrive l&#8217;autore) e iniziare a imparare come usare questo linguaggio di interrogazione, tramite la tabella di esempi riportata sul sito. Leggendola si vede che a tutti gli effetti si tratta un classico <strong>SQL</strong> (Structured Query Language). Qualche esempio:</p>
	<table>
	<thead>
	<tr>
	<th>Obiettivo</th>
	<th>Comando</th>
	</tr>
	</thead>
	<tbody>
	<tr>
	<td>Selezionare tutti i record</td>
	<td>SELECT *</td>
	</tr>
	<tr>
	<td>Selezionare le colonne A e B (ovvero la prima e la seconda) per tutti i record</td>
	<td>SELECT A,B</td>
	</tr>
	<tr>
	<td>Selezionare tutti record per le colonne A e B, dove il valore della colonna I è uguale a &#8220;3467&#8243;</td>
	<td>SELECT A,B WHERE I = 3467</td>
	</tr>
	<tr>
	<td>Selezionare tutti record delle colonne C e D, in cui la colonna F non assume il valore di 42043</td>
	<td>SELECT C,D WHERE F != 3467</td>
	</tr>
	</tbody>
	</table>
	<p>Nella pagina trovate molti altri esempi.</p>
	<p>Un&#8217;interrogazione che si potrebbe fare sul foglio dei musei di Firenze potrebbe essere quella per cui applichiamo questi filtri:</p>
	<ul>
	<li>Soltanto le colonne A, B, E, F, G, H, I e K;</li>
	<li>i soli musei a Est della &#8220;Cappella Brancacci&#8221;;</li>
	<li>solo quelli Statali;</li>
	<li>solo quelli che hanno un numero di telefono associato;</li>
	<li>ordinati da Nord verso Sud.</li>
	</ul>
	<p>Prima di costruirla, un breve <strong>video</strong> che illustra una prima query più semplice, in modo da prendere confidenza con lo strumento: le sole colonne &#8220;latitude&#8221; e &#8220;longitude&#8221;, dove la &#8220;latitude&#8221; è maggiore di 43.77 e tutto ordinato per longitudine crescente.</p>
	<p style="text-align: center;"><a href="https://www.youtube.com/watch?v=dQ_ngLlYMTI&amp;feature=youtu.be&amp;hd=1"><img class="aligncenter" src="http://i.imgur.com/HNMrxLL.png" alt="" width="500" height="281" /></a></p>
	<p>Fatta la query, poco sopra i risultati di output, <strong>tre righe</strong> di testo molto interessanti:</p>
	<p style="text-align: center;"><img class="aligncenter" src="http://i.imgur.com/p5kjlTV.png" alt="" width="500" height="57" /></p>
	<p>La <strong>prima</strong> è proprio la query che abbiamo costruito, secondo il linguaggio delle API di Google Drive:</p>
	<pre><code>select%20A%2CB where B%20%3E%2043.77 order by A asc </code></pre>
	<p>Nella stringa ci sono dei caratteri che ne rendono poco &#8220;leggibili&#8221; alcune parti: <code>select A,B where B &gt; 43.77 order by A asc</code> si comprende meglio. In realtà la prima è il risultato dell&#8217;<em>encoding</em> dei caratteri della seconda. Questa è una procedura necessaria perché l&#8217;interrogazione viene lanciata tramite un URL, e in questo alcuni caratteri non sono consentiti. Nel nostro caso lo spazio deve essere codificato in &#8220;%20&#8243;, la &#8220;,&#8221; in &#8220;%2C&#8221;, il &#8220;&lt;&#8221; in &#8220;%3E&#8221;.</p>
	<p>La <strong>seconda</strong> contiene due <em>hyperlink</em>, a due dei formati di <strong>output</strong> possibili di una query fatta su Google Drive Sheet: l&#8217;<strong><a href="http://spreadsheets.google.com/tq?tqx=out:html&amp;tq=select%20A%2CB%20where%20B%20%3E%2043.77%20order%20by%20A%20asc&amp;key=1nS167pnytroD9SQWi0BUa_eFaeCwuWOk1_0GvsBFmsg">HTML</a></strong> e il <strong><a href="http://spreadsheets.google.com/tq?tqx=out:csv&amp;tq=select%20A%2CB%20where%20B%20%3E%2043.77%20order%20by%20A%20asc&amp;key=1nS167pnytroD9SQWi0BUa_eFaeCwuWOk1_0GvsBFmsg">CSV</a></strong>. Il secondo è forse il formato più comodo per chi dovrà utilizzare i risultati di un&#8217;interrogazione per creare grafici, mappe e infografiche.</p>
	<p>Questo ad esempio l&#8217;<em>hyperlink</em> per l&#8217;output in CSV:</p>
	<pre>http://spreadsheets.google.com/tq?tqx=out:csv&amp;tq=select%20A%2CB%20where%20B%20%3E%2043.77%20order%20by%20A%20asc&amp;key=1nS167pnytroD9SQWi0BUa_eFaeCwuWOk1_0GvsBFmsg</pre>
	<p>Se lo separiamo in blocchi, si evidenziano elementi interessanti:</p>
	<ul>
	<li><code>tqx=out:csv</code>serve per impostare il formato di output;</li>
	<li><code>tq=select%20A%2CB%20where%20B%20%3E%2043.77%20order%20by%20A%20asc</code> per dichiarare la query;</li>
	<li><code>key=1nS167pnytroD9SQWi0BUa_eFaeCwuWOk1_0GvsBFmsg</code> per dichiarare l&#8217;ID del foglio.</li>
	</ul>
	<p>La <strong>terza riga</strong> un <a href="http://ouseful.open.ac.uk/datastore/gspreadsheetdb4.php?run=true&amp;gsKey=1nS167pnytroD9SQWi0BUa_eFaeCwuWOk1_0GvsBFmsg&amp;gqc=A%2CB&amp;gqw=B%20%3E%2043.77&amp;gqoA">segnalibro</a> che consente di aprire il Guardian Data Explorer con e fargli lanciare la <em>query</em> appena eseguita. E&#8217; un modo per <strong>salvare </strong>l&#8217;<strong>interrogazione</strong> costruita.</p>
	<p>Adesso siamo in grado di costruire la query indicata a inizio paragrafo:</p>
	<ul>
	<li>Soltanto le colonne A, B, E, F, G, H, I e K -&gt; <code>select A,B,E,F,G,H,I,K</code></li>
	<li>i soli musei a Est della &#8220;Cappella Brancacci&#8221; -&gt; <code>where B &gt; 11.2438292167895</code></li>
	<li>solo quelli Statali -&gt; <code>AND I matches 'Statale'</code></li>
	<li>solo quelli che hanno un numero di telefono associato -&gt; <code>AND H !=""</code></li>
	<li>ordinati da Nord verso Sud -&gt; <code>order by A desc</code></li>
	</ul>
	<pre><code>select A,B,E,F,G,H,I,K where B &gt; 11.2438292167895 AND I matches 'Statale' AND H !=\"\" order by B desc </code></pre>
	<p>Per potere usare questa query è necessario eseguire la codifica dei caratteri in modo che possa essere inserita in un URL. Il risultato (mille strumenti online per farlo, uno è <a href="http://meyerweb.com/eric/tools/dencoder/">questo</a>) dell&#8217;<em>endoding</em> è:</p>
	<pre><code>select%20A%2CB%2CE%2CF%2CG%2CH%2CI%2CK%20where%20B%20%3E%2011.2438292167895%20AND%20I%20matches%20%27Statale%27%20AND%20H%20!%3D%22%22%20order%20by%20B%20desc </code></pre>
	<p>E&#8217; possibile usare allora questa stringa per creare l&#8217;URL che esegue l&#8217;interrogazione di sopra e che produce come un risultato un file CSV:</p>
	<pre><a href=\"http://spreadsheets.google.com/tq?tqx=out:csv&amp;tq=select%20A%2CB%2CE%2CF%2CG%2CH%2CI%2CK%20where%20B%20%3E%2011.2438292167895%20AND%20I%20matches%20%27Statale%27%20AND%20H%20!%3D%22%22%20order%20by%20B%20desc&amp;key=1nS167pnytroD9SQWi0BUa_eFaeCwuWOk1_0GvsBFmsg\">http://spreadsheets.google.com/tq?tqx=out:csv&amp;tq=select%20A%2CB%2CE%2CF%2CG%2CH%2CI%2CK%20where%20B%20%3E%2011.2438292167895%20AND%20I%20matches%20%27Statale%27%20AND%20H%20!%3D%22%22%20order%20by%20B%20desc&amp;key=1nS167pnytroD9SQWi0BUa_eFaeCwuWOk1_0GvsBFmsg</a></pre>
	<p>Il file scaricato sarà apribile con qualsiasi editor di testo, e qualsiasi foglio elettronico.</p>
	<p style="text-align: center;"><img class="aligncenter" src="http://i.imgur.com/tSenfEr.png" alt="" width="500" height="259" /></p>
	<h1 id="usare-l-output-di-una-query-per-costruire-una-mappa-online">Usare l&#8217;output di una query per costruire una mappa online</h1>
	<p>Come già scritto sopra, il risultato di una di queste query può essere usata per visualizzare i dati in differenti modi. Uno è una <strong>mappa</strong> online (deformazione professionale).</p>
	<p>Il dataset di esempio si presta, perché contiene la latitudine e la longitudine di ogni museo. Uno strumento <em>free</em> e <em>open-source</em> molto comodo per generare mappe da output di questo tipo è <strong><a href="http://umap.openstreetmap.fr/it/">uMap</a></strong>. Tra i formati di input supportati proprio il CSV; l&#8217;unico requisito è che nel file CSV siano presenti le colonne denominate &#8220;<em>latitude</em>&#8221; e &#8220;<em>longitude</em>&#8220;.</p>
	<p>La cosa interessante è che la <strong>mappa</strong> online sarà <strong><em>live</em></strong> e ogni aggiornamento fatto nel foglio elettronico, produrrà un aggiornamento della mappa. Questo avviene perché tutte le volte che verrà visualizzata, verrà lanciata una nuova query.</p>
	<p>Nel <strong>video</strong> sottostante è illustrato come creare una mappa <em>online live</em> a partire proprio dall&#8217;URL soprastante, che produce in output un CSV.</p>
	<p style="text-align: center;"><a href="https://www.youtube.com/watch?v=bU7XtYo-w4M&amp;feature=youtu.be&amp;hd=1"><img class="aligncenter" src="http://i.imgur.com/PeOCcTp.png" alt="" width="500" height="281" /></a></p>
	<h1 id="considerazioni-finali">Considerazioni finali</h1>
	<p>Il Guardian Datastore Explorer non è un <em>query builder</em> particolarmente potente ed elegante, ma è sicuramente uno strumento che rende semplice l&#8217;avvicinamento al Query Language di Google Drive Sheet.</p>
	<p>Sopratutto fa comprendere che si tratta di un linguaggio semplice, e dopo poco tempo anche i novizi scriveranno le query &#8220;a mano&#8221; senza più usarlo. Bastano concetti di base di SQL, sapere fare l&#8217;encoding dei caratteri e leggersi la documentazione <img src='http://blog.spaziogis.it/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' />
</p>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2015/10/06/guardian-datastore-explorer-per-costruire-query-su-fogli-elettronici-google-drive/">Guardian Datastore Explorer: per costruire query su fogli elettronici Google Drive</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2015/10/06/guardian-datastore-explorer-per-costruire-query-su-fogli-elettronici-google-drive/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Guardian+Datastore+Explorer%3A+per+costruire+query+su+fogli+elettronici+Google+Drive&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Didattica&amp;rft.source=TANTO&amp;rft.date=2015-10-06&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2015/10/06/guardian-datastore-explorer-per-costruire-query-su-fogli-elettronici-google-drive/&amp;rft.language=English"></span>

		<media:thumbnail url="http://i.imgur.com/6qWgYXq.png" />
		<media:content url="http://i.imgur.com/6qWgYXq.png" medium="image" />
		<media:content url="http://i.imgur.com/49N1sAZ.png" medium="image" />
		<media:content url="http://i.imgur.com/OOtNPHu.png" medium="image" />
		<media:content url="http://i.imgur.com/yeelFlg.png" medium="image" />
		<media:content url="http://i.imgur.com/uwi9QC9.png" medium="image" />
		<media:content url="http://i.imgur.com/HNMrxLL.png" medium="image" />
		<media:content url="http://i.imgur.com/p5kjlTV.png" medium="image" />
		<media:content url="http://i.imgur.com/tSenfEr.png" medium="image" />
		<media:content url="http://i.imgur.com/PeOCcTp.png" medium="image" />
	</item>
		<item>
		<title>GDAL-OGR per accedere a cataloghi geografici (CSW)</title>
		<link>http://blog.spaziogis.it/2015/07/31/gdal-ogr-per-accedere-a-cataloghi-geografici-csw/</link>
		<comments>http://blog.spaziogis.it/2015/07/31/gdal-ogr-per-accedere-a-cataloghi-geografici-csw/#comments</comments>
		<pubDate>Fri, 31 Jul 2015 07:47:11 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Strumenti]]></category>
		<category><![CDATA[cataloghi]]></category>
		<category><![CDATA[csw]]></category>
		<category><![CDATA[gdal/ogr]]></category>
		<category><![CDATA[ogr]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6710</guid>
		<description><![CDATA[	
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=GDAL-OGR+per+accedere+a+cataloghi+geografici+%28CSW%29&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Strumenti&amp;rft.source=TANTO&amp;rft.date=2015-07-31&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2015/07/31/gdal-ogr-per-accedere-a-cataloghi-geografici-csw/&amp;rft.language=English"></span>
Il 18 giugno 2015 è stata rilasciata la versione 2.0.0 di GDAL/OGR. Una delle novità è legata a un nuovo driver di OGR “Catalog Service for the Web (CSW)”, che consente di accedere a cataloghi di risorse cartografiche esposti sul web. La sintassi di base per leggere le informazioni da queste fonti è: ogrinfo -ro [...]]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=GDAL-OGR+per+accedere+a+cataloghi+geografici+%28CSW%29&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Strumenti&amp;rft.source=TANTO&amp;rft.date=2015-07-31&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2015/07/31/gdal-ogr-per-accedere-a-cataloghi-geografici-csw/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<p dir="ltr">Il 18 giugno 2015 è stata rilasciata la versione 2.0.0 di GDAL/OGR. Una delle novità è legata a un nuovo driver di OGR “Catalog Service for the Web (CSW)”, che consente di accedere a cataloghi di risorse cartografiche esposti sul web.</p>
	<p dir="ltr">La sintassi di base per leggere le informazioni da queste fonti è:</p>
	<pre dir="ltr">ogrinfo -ro -al -noextent CSW:http//catalogo.it/csw</pre>
	<p dir="ltr">L&#8217;utility di riferimento è <a href="http://www.gdal.org/1.11/ogrinfo.html" target="_blank">ogrinfo</a>, e sono a disposizione quindi tutte le altre opzioni del <a href="http://www.gdal.org/1.11/ogrinfo.html">comando</a>.</p>
	<p dir="ltr">I cataloghi CSW sono un po&#8217; come quei cassetti pieni di calzini in cui, in occasione di una importante ricorrenza, cerchiamo quelli lilla a pois bianchi (sono an pendant con l&#8217;ultima nostra meravigliosa giacca), ma per troppa abbondanza e varietà non riusciremo mai a trovare. Bisogna anche saper cercare <img src='http://blog.spaziogis.it/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
	<p dir="ltr">OGR è l&#8217;ultimo arrivato tra gli strumenti di accesso e ricerca. Ecco qualche semplice esempio, basato sul <a href="http://www.rndt.gov.it/RNDT/home/index.php?option=com_content&amp;view=article&amp;id=88&amp;Itemid=229" target="_blank">catalogo</a> del Repertorio Nazionale dei Dati Territoriali (RNDT).</p>
	<h2 id="avere-l'elenco-di-tutti-i-record-del-server">Avere l&#8217;elenco di tutti i record del server</h2>
	<pre dir="ltr">ogrinfo -ro -al -noextent CSW:http://www.rndt.gov.it/RNDT/CSW -oo MAX_RECORDS=100</pre>
	<p>Sul catalogo RNDT sono presenti più di 17000 record, quindi la risposta al comando sarà &#8220;lunga&#8221;. L&#8217;opzione MAX_RECORDS fissa il numero massimo di record che è possibile ricevere ciclicamente durante una chiamata. Nell’esempio di sopra, per 17000 record quindi 170 cicli, ognuno composto da 100 record di output.</p>
	<h2 id="tutti-i-record-all'interno-di-una-determinata-area">Tutti i record all&#8217;interno di una determinata area</h2>
	<pre dir="ltr">ogrinfo -ro -al -noextent CSW:http://www.rndt.gov.it/RNDT/CSW -spat 12 35 15 38 -oo MAX_RECORDS=100</pre>
	<p>Ogni record di un catalogo CSW è associato ad un’estensione geografica. Inserendo il parametro -spat si impostano le coordinate del boundig box (xmin ymin xmax ymax, in EPSG:4326) all’interno del quale si vuole eseguire la ricerca: in risposta si avranno tutti i record ricadenti in quell’area.</p>
	<h2 id="tutti-i-record-che-contengono-una-determinata-parola-(stringa-di-testo)-in-uno-dei-campi-esposti-dal-catalogo">Tutti i record che contengono una determinata parola (stringa di testo) in uno dei campi esposti dal catalogo</h2>
	<pre dir="ltr">ogrinfo -ro -al -noextent CSW:http://www.rndt.gov.it/RNDT/CSW -where \"abstract LIKE '%geologia%'\" -oo MAX_RECORDS=100</pre>
	<p>In questo modo si cercheranno tutti i record che contengono la parola &#8220;geologia&#8221; nel campo &#8220;abstract&#8221;. Ad oggi sono 31.</p>
	<p><img class="aligncenter size-full wp-image-6727" src="http://blog.spaziogis.it/wp-content/uploads//2015/07/2015-07-31_11h57_06.png" alt="2015-07-31_11h57_06" width="421" height="95" /></p>
	<p>Gli altri campi che è possibile sfruttare per fare ricerche sono:</p>
	<ul id="draft_check_box_list_0">
	<li>identifier (String)</li>
	<li>other_identifiers (StringList)</li>
	<li>type (String)</li>
	<li>subject (String)</li>
	<li>other_subjects (StringList)</li>
	<li>references (String)</li>
	<li>other_references (StringList)</li>
	<li>modified (String)</li>
	<li>abstract (String)</li>
	<li>date (String)</li>
	<li>language (String)</li>
	<li>rights (String)</li>
	<li>format (String)</li>
	<li>other_formats (StringList)</li>
	<li>creator (String)</li>
	<li>source (String)</li>
	</ul>
	<h2 id="tutti-i-record-che-contengono-una-determinata-stringa-in-un-campo-qualsiasi">Tutti i record che contengono una determinata stringa in un campo qualsiasi</h2>
	<pre dir="ltr">ogrinfo -ro -al -noextent CSW:http://www.rndt.gov.it/RNDT/CSW -where \"anytext LIKE '%frane%'\" -oo MAX_RECORDS=100</pre>
	<p>La stringa cercata è &#8220;frane&#8221;, e si ottengono 52 record.</p>
	<h2 id="tutti-i-record-della-ricerca-precedente-ma-in-formato-iso-19115/19119">Tutti i record della ricerca precedente ma in formato ISO 19115/19119</h2>
	<pre dir="ltr">ogrinfo -ro -al -noextent CSW:http://www.rndt.gov.it/RNDT/CSW -where \"anytext LIKE '%frane%'\" -oo OUTPUT_SCHEMA=gmd -oo MAX_RECORDS=100</pre>
	<p>L&#8217;output in questo caso è secondo lo schema descritto qui <a href="http://www.isotc211.org/2005/gmd" target="_blank">http://www.isotc211.org/2005/gmd</a>. Se invece si scrive OUTPUT_SCHEMA=csw, sarà secondo queste specifiche <a href="http://www.opengis.net/cat/csw/2.0.2" target="_blank">http://www.opengis.net/cat/csw/2.0.2</a>.</p>
	<hr />
	<p>Tutte le altre novità su GDAL/OGR 2.0.0 le trovate sintetizzate nel <a href="http://erouault.blogspot.it/2015/06/gdalogr-200-released.html">post</a> di Even Rouault e purtroppo<strong> il catalogo RNDT non è ancora nel registro INSPIRE!</strong> <img src='http://blog.spaziogis.it/wp-includes/images/smilies/icon_sad.gif' alt=':(' class='wp-smiley' />
</p>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2015/07/31/gdal-ogr-per-accedere-a-cataloghi-geografici-csw/">GDAL-OGR per accedere a cataloghi geografici (CSW)</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2015/07/31/gdal-ogr-per-accedere-a-cataloghi-geografici-csw/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=GDAL-OGR+per+accedere+a+cataloghi+geografici+%28CSW%29&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Strumenti&amp;rft.source=TANTO&amp;rft.date=2015-07-31&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2015/07/31/gdal-ogr-per-accedere-a-cataloghi-geografici-csw/&amp;rft.language=English"></span>

		<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2015/07/2015-07-31_11h57_06-150x95.png" />
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2015/07/2015-07-31_11h57_06.png" medium="image">
			<media:title type="html">2015-07-31_11h57_06</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2015/07/2015-07-31_11h57_06-150x95.png" />
		</media:content>
	</item>
		<item>
		<title>Take the best, use the REST</title>
		<link>http://blog.spaziogis.it/2014/12/29/take-the-best-use-the-rest/</link>
		<comments>http://blog.spaziogis.it/2014/12/29/take-the-best-use-the-rest/#comments</comments>
		<pubDate>Mon, 29 Dec 2014 14:00:56 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Didattica]]></category>
		<category><![CDATA[ArcGIS]]></category>
		<category><![CDATA[dati]]></category>
		<category><![CDATA[ESRI]]></category>
		<category><![CDATA[gdal/ogr]]></category>
		<category><![CDATA[query]]></category>
		<category><![CDATA[rest]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6507</guid>
		<description><![CDATA[	
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Take+the+best%2C+use+the+REST&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Didattica&amp;rft.source=TANTO&amp;rft.date=2014-12-29&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/12/29/take-the-best-use-the-rest/&amp;rft.language=English"></span>
Diversi geoportali, piccoli e grandi, di Pubbliche Amministrazioni da ogni parte del mondo, sono basati su tecnologia ESRI ArcGIS. All&#8217;utente di solito viene esposta un&#8217;interfaccia di consultazione del catalogo dei dataset (come quella del geoportale della Regione Siciliana) e/o l&#8217;accesso diretto ai dati e alla loro rappresentazione tramite servizi OGC standard come WMS, WFS e WCS. Ma ci [...]]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Take+the+best%2C+use+the+REST&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Didattica&amp;rft.source=TANTO&amp;rft.date=2014-12-29&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/12/29/take-the-best-use-the-rest/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<p>Diversi geoportali, piccoli e grandi, di Pubbliche Amministrazioni da ogni parte del mondo, sono basati su tecnologia ESRI ArcGIS. All&#8217;utente di solito viene esposta un&#8217;interfaccia di consultazione del <strong>catalogo</strong> dei dataset (come quella del <a href="http://www.google.com/url?q=http%3A%2F%2Fwww.sitr.regione.sicilia.it%2Fgeoportale&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNG7RUw_DCXDDpf6kHOLLKGZrZnT0Q" target="_blank">geoportale</a> della Regione Siciliana) e/o l&#8217;accesso diretto ai dati e alla loro rappresentazione tramite <strong>servizi OGC</strong> standard come WMS, WFS e WCS.</p>
	<p>Ma ci sono diverse altre caratteristiche interessanti rese disponibili da queste tecnologie e che molto spesso ignoriamo, la cui conoscenza ci consente di accedere ad un numero molto più ampio di informazioni e dati. Tutto questo oggi è a maggior forza interessante, grazie alle politiche Open Data realizzate da molte Pubbliche Amministrazioni e anche perché dal <strong>19 marzo 2013</strong>i &#8221;tutti i dati e documenti che le pubbliche amministrazioni pubblicano con qualsiasi modalità, senza l’espressa adozione di una licenza d’uso, si intendono rilasciati come dati aperti (<strong>open data by default</strong>)&#8221; (cit. dati.gov.it, mentre dal punto di vista normativo si tratta dell&#8217;<strong>articolo 52, comma 2</strong> del <strong><a href="http://www.agid.gov.it/cad/accesso-telematico-riutilizzo-dati-pubbliche-amministrazioni" target="_blank">CAD</a></strong>).</p>
	<p>In questo post sottolineerò alcuni elementi relativi all&#8217;accesso ai dati tramite <em>query</em> via interfaccia <strong>REST</strong> (più propriamente tramite API REST).</p>
	<h2 id="introduzione">Introduzione</h2>
	<p>Le API REST di ArcGIS &#8211; REST è l&#8217;acronimo di <em>Representational State Transfer</em> - forniscono una semplice <strong>interfaccia</strong> di <strong>accesso web</strong> ai server cartografici di questa casa software, sia ai dati/servizi che ad alcuni processi. Il tutto è quindi accessibile tramite una serie di URL gerarchici, che identificano ciò a cui si vuole accedere. L&#8217;URL di default di accesso ha di _default _questa struttura:</p>
	<pre>http://&lt;host&gt;:/arcgis/rest/services</pre>
	<p>Ad esempio quello della Regione Siciliana è questo:</p>
	<p><a href="http://map.sitr.regione.sicilia.it/ArcGIS/rest/services" target="_blank">http://map.sitr.regione.sicilia.it/ArcGIS/rest/services</a></p>
	<p>E aprendo l&#8217;indirizzo sono elencati dati e servizi disponibili in questo server.</p>
	<p><img class="alignnone size-full wp-image-6513 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/12/sicilia_rest.png" alt="sicilia_rest" width="500" height="285" /></p>
	<p>La <strong><a href="http://www.google.com/url?q=http%3A%2F%2Fresources.arcgis.com%2Fen%2Fhelp%2Farcgis-rest-api%2Findex.html%23%2FThe_ArcGIS_REST_API&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHuezGAZ5-mzV-FZry6S5ZmvV-AAA" target="_blank">documentazione</a></strong><a href="http://www.google.com/url?q=http%3A%2F%2Fresources.arcgis.com%2Fen%2Fhelp%2Farcgis-rest-api%2Findex.html%23%2FThe_ArcGIS_REST_API&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHuezGAZ5-mzV-FZry6S5ZmvV-AAA" target="_blank"> ufficiale</a> generale è molto ricca e vasta e non aggiungerò altri dettagli generici.</p>
	<p>A seguire invece alcuni esempi di <strong>query</strong>  via ArcGIS REST API, in modo da apprezzarne la ricchezza e le modalità di accesso.</p>
	<h2 id="interroghiamo-una-risorsa">Interroghiamo una risorsa</h2>
	<p>Per gli esempi di questo articolo farò riferimento alla <strong>Regione Umbria</strong>, che ha aperto <a href="http://www.google.com/url?q=http%3A%2F%2Fagendadigitale.regione.umbria.it%2Fcartografia-umbria%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGh7oXngcnvcK4DvFY_uBWgTYXftw" target="_blank">da poco</a> i suoi dati cartografici. Dal suo portale open data possiamo leggere l&#8217;URL pubblico del server ArcGIS.</p>
	<p><img class="alignnone size-full wp-image-6514 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/12/url_umbria.png" alt="url_umbria" width="500" height="232" /></p>
	<p>Si legge</p>
	<pre>http://geo.umbriaterritorio.it/arcgis/</pre>
	<p>Bisogna aggiungere (vedi sopra) &#8220;rest/services/&#8221; e abbiamo</p>
	<p><a href="http://geo.umbriaterritorio.it/arcgis/rest/services/" target="_blank">http://geo.umbriaterritorio.it/arcgis/rest/services/</a></p>
	<p>A questo punto non resta che sfogliare un po&#8217; la <em>directory</em> pubblica e scegliere un <em>layer</em> su cui eseguire una <em>query</em>. Userò il dataset dei &#8220;NUMERI CIVICI&#8221;, che si raggiunge facendo click su <a href="http://www.google.com/url?q=http%3A%2F%2Fgeo.umbriaterritorio.it%2FArcGIS%2Frest%2Fservices%2FPublic%2FECOGRAFICO_CATASTALE1_WGS84%2FMapServer%2F0&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGsOAQrrPu5ImWNlAL_d8H3zDdhtQ" target="_blank">Public &gt; ECOGRAFICO_CATASTALE_WGS84 (MapServer) &gt; NUMERI CIVICI</a>.</p>
	<p>Scorrendo la pagina verso il basso è visibile il tasto &#8220;<em>Query</em>&#8220;, tramite il quale è possibile interrogare il dataset.</p>
	<p><img class="alignnone size-full wp-image-6512 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/12/query.png" alt="query" width="500" height="370" /></p>
	<p>Per lanciare la prima interrogazione devo inserire almeno un criterio di ricerca. Ad esempio <a href="http://www.google.com/url?q=http%3A%2F%2Fgeo.umbriaterritorio.it%2FArcGIS%2Frest%2Fservices%2FPublic%2FECOGRAFICO_CATASTALE1_WGS84%2FMapServer%2F0%2Fquery%3Fgeometry%26geometryType%3DesriGeometryPoint%26inSR%26spatialRel%3DesriSpatialRelIntersects%26relationParam%26objectIds%3D1%26where%26time%26returnCountOnly%3Dfalse%26returnIdsOnly%3Dfalse%26returnGeometry%3Dtrue%26maxAllowableOffset%26outSR%26outFields%3D*%26f%3Dhtml&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNH6iLFbjBb4YxEY1dKVGuFrZBhiMQ" target="_blank">il numero civico con &#8220;ID=1&#8243;</a> (ogni elemento ha sempre un identificativo numerico associato). La pagina html con il risultato dell&#8217;interrogazione mi fornisce informazioni sia sugli attributi che sulla geometria dell&#8217;elemento.</p>
	<p><img class="alignnone size-full wp-image-6509 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/12/attributi.png" alt="attributi" width="382" height="212" /></p>
	<p>Posso fare allora una query per <strong>attributo</strong>: <a href="http://geo.umbriaterritorio.it/ArcGIS/rest/services/Public/ECOGRAFICO_CATASTALE1_WGS84/MapServer/0/query?geometry=&#038;geometryType=esriGeometryPoint&#038;inSR=&#038;spatialRel=esriSpatialRelIntersects&#038;relationParam=&#038;objectIds=&#038;where=DESCR_S49+LIKE+%27%25CORPOSANO%25%27&#038;time=&#038;returnCountOnly=false&#038;returnIdsOnly=false&#038;returnGeometry=true&#038;maxAllowableOffset=&#038;outSR=&#038;outFields=*&#038;f=html" target="_blank">tutti gli elementi</a> che contengono nel campo &#8220;DESCR_S49&#8243; la stringa &#8220;CORPOSANO&#8221;. Nell&#8217;interfaccia leggiamo che ci sono 47 record che soddisfano questa condizione e l&#8217;output è in HTML. Ci sono però altri formati di output tra cui <strong>KML</strong> e <strong>JSON</strong>; <a href="http://www.google.com/url?q=http%3A%2F%2Fgeo.umbriaterritorio.it%2FArcGIS%2Frest%2Fservices%2FPublic%2FECOGRAFICO_CATASTALE1_WGS84%2FMapServer%2F0%2Fquery%3Fgeometry%26geometryType%3DesriGeometryPoint%26inSR%26spatialRel%3DesriSpatialRelIntersects%26relationParam%26objectIds%26where%3DDESCR_S49%2BLIKE%2B'%2525CORPOSANO%2525'%26time%26returnCountOnly%3Dfalse%26returnIdsOnly%3Dfalse%26returnGeometry%3Dtrue%26maxAllowableOffset%26outSR%26outFields%3D*%26f%3Dpjson&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHS-5eXTUQRW6lngrc9W3yzjDYWZg" target="_blank">questo</a> l&#8217;output in JSON della stessa query.</p>
	<p><img class="alignnone size-full wp-image-6511 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/12/output.png" alt="output" width="500" height="116" /></p>
	<p>Questi due formati quindi mostrano nei fatti, come una query REST su server ArcGIS sia un&#8217;ulteriore modalità di accesso al dato grezzo.</p>
	<h2>Query spaziale</h2>
	<p>E&#8217; possibile eseguire anche delle interrogazioni spaziali di complessità variabile. Ad esempio posso estrarre tutti i civici che ricadono tra queste coordinate <a href="http://geo.umbriaterritorio.it/ArcGIS/rest/services/Public/ECOGRAFICO_CATASTALE1_WGS84/MapServer/0/query?geometry=12.384356%2C+43.108511%2C12.388869%2C43.110765&amp;geometryType=esriGeometryEnvelope&amp;inSR=&amp;spatialRel=esriSpatialRelIntersects&amp;relationParam=&amp;objectIds=&amp;where=&amp;time=&amp;returnCountOnly=false&amp;returnIdsOnly=false&amp;returnGeometry=true&amp;maxAllowableOffset=&amp;outSR=&amp;outFields=*&amp;f=html" target="_blank">12.384356,43.108511,12.388869,43.110765</a> (&lt;xmin&gt;,&lt;ymin&gt;,&lt;xmax&gt;,&lt;ymax&gt;).</p>
	<p><img class="alignnone size-full wp-image-6542 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/12/spatial_query.png" alt="spatial_query" width="496" height="118" /></p>
	<p>Posso farne il download con GDAL/OGR (vedi sotto) e ottenere rapidamente i dati in formato spaziale e al contempo visualizzarne rapidamente una loro rappresentazione.</p>
	<p><img class="alignnone size-full wp-image-6543 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/12/spatial_query_map.jpg" alt="spatial_query_map" width="500" height="394" /></p>
	<h2 id="accesso-tramite-gdal/ogr-a-una-query">Accesso tramite GDAL/OGR a una query</h2>
	<p>La libreria <strong>GDAL/OGR</strong> ha i driver di accesso in lettura e scrittura al <a href="http://www.google.com/url?q=http%3A%2F%2Fwww.gdal.org%2Fdrv_geojson.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEYFJK4I_iIh-CbRFHchaL-132kJg" target="_blank">formato GeoJSON</a>. Uno degli output delle query di sopra è proprio JSON e questa libreria lo riesce a leggere nativamente proprio come GeoJSON.</p>
	<p>L&#8217;ultima query si effettua chiamando <a href="http://geo.umbriaterritorio.it/ArcGIS/rest/services/Public/ECOGRAFICO_CATASTALE1_WGS84/MapServer/0/query?geometry=&amp;geometryType=esriGeometryPoint&amp;inSR=&amp;spatialRel=esriSpatialRelIntersects&amp;relationParam=&amp;objectIds=&amp;where=DESCR_S49+LIKE+%27%25CORPOSANO%25%27&amp;time=&amp;returnCountOnly=false&amp;returnIdsOnly=false&amp;returnGeometry=true&amp;maxAllowableOffset=&amp;outSR=&amp;outFields=*&amp;f=pjson" target="_blank">questo lungo URL</a>:</p>
	<pre>http://geo.umbriaterritorio.it/ArcGIS/rest/services/Public/ECOGRAFICO_CATASTALE1_WGS84/MapServer/0/query?geometry=&amp;geometryType=esriGeometryPoint&amp;inSR=&amp;spatialRel=esriSpatialRelIntersects&amp;relationParam=&amp;objectIds=&amp;<strong>where</strong>=DESCR_S49+LIKE+%27%25CORPOSANO%25%27&amp;time=&amp;returnCountOnly=false&amp;returnIdsOnly=false&amp;returnGeometry=true&amp;maxAllowableOffset=&amp;outSR=&amp;outFields=*&amp;<strong>f</strong>=pjson</pre>
	<p>Nell&#8217;indirizzo di sopra sono visibili tutti i parametri disponibili per effettuare un’interrogazione, ma sopra abbiamo valorizzato soltanto la stringa di testo da ricercare in un determinato campo (parametro &#8220;where&#8221;) e il formato di output (parametro &#8220;f&#8221;). Questo URL fa da <em>source</em> per GDAL/OGR. Se voglio avere tutte le <strong>informazioni</strong> su questa sorgente di dati vettoriali userò il classico ogrinfo:</p>
	<pre>ogrinfo -ro &quot;http://geo.umbriaterritorio.it/ArcGIS/rest/services/Public/ECOGRAFICO_CATASTALE1_WGS84/MapServer/0/query?geometry=&amp;geometryType=esriGeometryPoint&amp;inSR=&amp;spatialRel=esriSpatialRelIntersects&amp;relationParam=&amp;objectIds=&amp;where=DESCR_S49+LIKE+%27%25CORPOSANO%25%27&amp;time=&amp;returnCountOnly=false&amp;returnIdsOnly=false&amp;returnGeometry=true&amp;maxAllowableOffset=&amp;outSR=&amp;outFields=*&amp;f=pjson&quot; OGRGeoJSON</pre>
	<p>&#8220;OGRGeoJSON&#8221; è per GDAL/OGR il nome predefinito del layer di una sorgente GeoJSON. &#8220;-ro&#8221; perché imposto l’accesso in sola lettura.</p>
	<p>Se voglio <strong>convertire</strong> in ArcView Shapefile l&#8217;output di questa query userò ogr2ogr:</p>
	<pre>ogr2ogr CORPOSANO.shp &quot;http://geo.umbriaterritorio.it/ArcGIS/rest/services/Public/ECOGRAFICO_CATASTALE1_WGS84/MapServer/0/query?geometry=&amp;geometryType=esriGeometryPoint&amp;inSR=&amp;spatialRel=esriSpatialRelIntersects&amp;relationParam=&amp;objectIds=&amp;where=DESCR_S49+LIKE+%27%25CORPOSANO%25%27&amp;time=&amp;returnCountOnly=false&amp;returnIdsOnly=false&amp;returnGeometry=true&amp;maxAllowableOffset=&amp;outSR=&amp;outFields=*&amp;f=pjson&quot; OGRGeoJSON</pre>
	<p>Come esempio, riporto qui il <a href="http://blog.spaziogis.it/wp-content/uploads//2014/12/CORPOSANO.zip" target="_blank"><strong>download</strong></a> fatto con GDAL/OGR nei formati ArcView Shapefile, GeoJSON e KML.</p>
	<h2 id="web-mapping-a-partire-da-query">Web mapping a partire da query</h2>
	<p>Queste query possono essere visualizzate in maniera molto efficace anche in un&#8217;interfaccia di <em>web mapping</em>. Sia a partire dal salvataggio dell&#8217;output, che tramite chiamata diretta in <em>realtime</em>. La cosa è inoltre resa semplice da una bella libreria rilasciata in <em>open source</em> da ESRI e basata su <strong>Leaflet</strong>: <a href="http://www.google.com/url?q=http%3A%2F%2Fesri.github.io%2Fesri-leaflet&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFHs50dsXaxLd9Jq6RYR_VlXnnM2A" target="_blank">http://esri.github.io/esri-leaflet</a>.</p>
	<p>La query di sopra (quella sulla stringa &#8220;CORPOSANO&#8221;) ad esempio si può rappresentare rapidamente come sotto (click <strong><a href="http://www.google.com/url?q=http%3A%2F%2Ftanto.github.io%2Farcgisqueryrest%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGBS69DEWt-ac8Wj8EnLjQfdhWKfQ" target="_blank">qui</a></strong> per aprire a <strong>schermo intero</strong>).</p>
	<p><a href="http://www.google.com/url?q=http%3A%2F%2Ftanto.github.io%2Farcgisqueryrest%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGBS69DEWt-ac8Wj8EnLjQfdhWKfQ" target="_blank"><img class="alignnone size-full wp-image-6510 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/12/leaflet.jpg" alt="leaflet" width="500" height="378" border="0" /></a></p>
	<p>Il codice lo trovate qui: <a href="https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Ftanto%2Farcgisqueryrest%2Fblob%2Fgh-pages%2Findex.html&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNG4onJJ1-fhQ16rPu3V_R3aFE0ofw" target="_blank">https://github.com/tanto/arcgisqueryrest/blob/gh-pages/index.html</a></p>
	<h2 id="alcune-note-in-conclusione">Alcune note in conclusione</h2>
	<p>Sono rimasto molto in superficie, ma l&#8217;intento è quello di mostrare un punto di ingresso poco noto e utile, visto il sempre maggior numero di dati spaziali oggi disponibili e aperti. Di default l&#8217;<em>output</em> di queste _query _è limitato a 1000 risultati, quindi è necessario &#8220;ciclare&#8221; le chiamate. Ad esempio per ID a gruppi di 1000 record:</p>
	<ul id="draft_check_box_list_0">
	<li>inizio con la condizione <a href="http://www.google.com/url?q=http%3A%2F%2Fgeo.umbriaterritorio.it%2FArcGIS%2Frest%2Fservices%2FPublic%2FECOGRAFICO_CATASTALE1_WGS84%2FMapServer%2F0%2Fquery%3Fgeometry%26geometryType%3DesriGeometryPoint%26inSR%26spatialRel%3DesriSpatialRelIntersects%26relationParam%26objectIds%26where%3DOBJECTID%253E%253D1%2Band%2B%2BOBJECTID%253C%253D1000%26time%26returnCountOnly%3Dfalse%26returnIdsOnly%3Dfalse%26returnGeometry%3Dtrue%26maxAllowableOffset%26outSR%26outFields%3D*%26f%3Dhtml&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNESchVZwiY-eDtZyqQ-tWo3yZyDuw" target="_blank">OBJECTID&gt;=1 and OBJECTID&lt;=1000</a>;</li>
	<li>poi OBJECTID&gt;=1001 and OBJECTID&lt;=2000;</li>
	<li>e così via &#8230;</li>
	</ul>
	<p>Il totale (190140 record), da conoscere prima di fare partire il ciclo, si ricava ad esempio con <a href="http://www.google.com/url?q=http%3A%2F%2Fgeo.umbriaterritorio.it%2FArcGIS%2Frest%2Fservices%2FPublic%2FECOGRAFICO_CATASTALE1_WGS84%2FMapServer%2F0%2Fquery%3Fgeometry%26geometryType%3DesriGeometryPoint%26inSR%26spatialRel%3DesriSpatialRelIntersects%26relationParam%26objectIds%26where%3D1%253D1%26time%26returnCountOnly%3Dtrue%26returnIdsOnly%3Dfalse%26returnGeometry%3Dtrue%26maxAllowableOffset%26outSR%26outFields%3D*%26f%3Dhtml&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGXetugfKd8MZId4F4iV-3NJOsWhg" target="_blank">questa query</a>. Ci sono altri modi per ciclare tra i record, questo è solo un esempio.</p>
	<p>L&#8217;accesso REST è molto utile anche con sorgenti di tipo <em>raster</em>, ma magari lo scrive qualcun altro, in un altro post <img src='http://blog.spaziogis.it/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' />  .</p>
	<p>L&#8217;URL con struttura &#8220;http://&lt;host&gt;:/arcgis/rest/services&#8221; è quello di <em>default</em>. Chi gestisce il server potrebbe usare uno schema diverso.</p>
	<p>Questo post è dedicato al giovane Padawan &#8220;<strong><a href="https://plus.google.com/u/0/114313445728286224740/posts" target="_blank">Flavio</a></strong>&#8220;, che mi ha fatto scoprire <a href="https://www.google.com/url?q=https%3A%2F%2Fhub.qgis.org%2Fwiki%2F17%2FArcgis_rest&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEmBzX8cx7Y0rkxiZXreebrdHQWVw" target="_blank">questa pagina</a> e ha dato la stura alla stesura di questo testo.</p>
	<p>Non mi <strong>REST</strong>a che augurarvi un <strong>buon 2015</strong>!
</p>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2014/12/29/take-the-best-use-the-rest/">Take the best, use the REST</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2014/12/29/take-the-best-use-the-rest/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Take+the+best%2C+use+the+REST&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Didattica&amp;rft.source=TANTO&amp;rft.date=2014-12-29&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/12/29/take-the-best-use-the-rest/&amp;rft.language=English"></span>

		<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/12/sicilia_rest-150x150.png" />
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/12/sicilia_rest.png" medium="image">
			<media:title type="html">sicilia_rest</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/12/sicilia_rest-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/12/url_umbria.png" medium="image">
			<media:title type="html">url_umbria</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/12/url_umbria-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/12/query.png" medium="image">
			<media:title type="html">query</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/12/query-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/12/attributi.png" medium="image">
			<media:title type="html">attributi</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/12/attributi-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/12/output.png" medium="image">
			<media:title type="html">output</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/12/output-150x116.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/12/spatial_query.png" medium="image">
			<media:title type="html">spatial_query</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/12/spatial_query-150x118.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/12/spatial_query_map.jpg" medium="image">
			<media:title type="html">spatial_query_map</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/12/spatial_query_map-150x150.jpg" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/12/leaflet.jpg" medium="image">
			<media:title type="html">leaflet</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/12/leaflet-150x150.jpg" />
		</media:content>
	</item>
		<item>
		<title>Il rischio idrogeologico, la Regione Siciliana e l&#8217;informazione civica</title>
		<link>http://blog.spaziogis.it/2014/10/27/il-rischio-idrogeologico-la-regione-siciliana-e-linformazione-civica/</link>
		<comments>http://blog.spaziogis.it/2014/10/27/il-rischio-idrogeologico-la-regione-siciliana-e-linformazione-civica/#comments</comments>
		<pubDate>Mon, 27 Oct 2014 07:38:26 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Dati]]></category>
		<category><![CDATA[comunicazione]]></category>
		<category><![CDATA[opendata]]></category>
		<category><![CDATA[pubblica-amministrazione]]></category>
		<category><![CDATA[rischio]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6425</guid>
		<description><![CDATA[	
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Il+rischio+idrogeologico%2C+la+Regione+Siciliana+e+l%26%238217%3Binformazione+civica&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Dati&amp;rft.source=TANTO&amp;rft.date=2014-10-27&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/10/27/il-rischio-idrogeologico-la-regione-siciliana-e-linformazione-civica/&amp;rft.language=English"></span>
Preso dalle tante sollecitazioni arrivate dall&#8217;emergenza maltempo a Genova, Parma e Alessandria, ho pensato di iniziare a raccogliere dati e informazioni legate al Rischio idrogeologico in terra di Sicilia. Ho constatato una barriera di accesso alle informazioni sui siti ufficiali della Pubblica Amministrazione, e anche le notizie reperibili attraverso articoli giornalistici, non riescono a dare una [...]]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Il+rischio+idrogeologico%2C+la+Regione+Siciliana+e+l%26%238217%3Binformazione+civica&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Dati&amp;rft.source=TANTO&amp;rft.date=2014-10-27&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/10/27/il-rischio-idrogeologico-la-regione-siciliana-e-linformazione-civica/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<p>Preso dalle tante sollecitazioni arrivate dall&#8217;emergenza maltempo a Genova, Parma e Alessandria, ho pensato di iniziare a raccogliere dati e informazioni legate al <strong>Rischio</strong> idrogeologico in terra di Sicilia.<br />
Ho constatato una barriera di accesso alle informazioni sui siti ufficiali della Pubblica Amministrazione, e anche le notizie reperibili attraverso articoli giornalistici, non riescono a dare una risposta chiara ad una domanda semplice: <strong>sono in pericolo</strong>?</p>
	<p>Fornire gli strumenti per dare una risposta, significa fare una buona <strong>informazione civica</strong>, un obiettivo alto e stimolante per chi gestisce la cosa pubblica, ma che alle volte non è nemmeno abbozzato.</p>
	<p>Per valutare il mio rischio devo rispondere almeno ad altre due domande:</p>
	<ul id="draft_check_box_list_0">
	<li>vivo <strong>vicino</strong> ad un rischio naturale?</li>
	<li>se sì, <strong>quanto</strong> è elevato?</li>
	</ul>
	<p>I contenuti utili a definire la cosa sono disponibili, ma non permettono di passare dalla propria e personale conoscenza del territorio alla sua <strong>rappresentazione istituzionale</strong>.</p>
	<p>Ho concentrato la mia ricerca sul rischio idrogeologico e sono &#8220;caduto&#8221; in <a href="http://gds.it/2014/10/12/a-rischio-frane-quasi-tutta-la-sicilia-solo-lesperto-di-zona-puo-dare-subito-lsos_245280/">questo articolo</a> del Giornale di Sicilia: nella mia regione ci sarebbero <strong>22 mila aree a rischio</strong>.<br />
Il progetto di riferimento è il <strong>PAI</strong> (Piano di Assetto Idrogeologico), &#8220;<em>lo strumento conoscitivo, normativo e tecnico-operativo mediante il quale sono pianificate e programmate le azioni, gli interventi e le norme d’uso riguardanti la  difesa dal rischio idrogeologico</em><em> del territorio siciliano</em>&#8220;.<br />
Il <strong>sito web ufficiale</strong> è <a href="http://www.sitr.regione.sicilia.it/pai/">http://www.sitr.regione.sicilia.it/pai/</a>, tenuto aggiornato nel tempo e ricco di pagine contenenti numerosi allegati (essenzialmente file PDF, compressi in file .zip). Mi aiuta a rispondere alle questioni poste sopra?</p>
	<p>Non credo, salvo non conoscere ad esempio i nomi dei bacini idrografici locali, cosa ignota al 99 % delle persone che frequento. Ma anche sapendo il nome del bacino &#8211; ad esempio &#8220;Torrente Saponara, Area Territoriale tra i bacini T.te Saponara e F.ra Niceto&#8221; &#8211; ci si trova davanti a <strong>barriere di comunicazione</strong> come quella dell&#8217;immagine di sotto.</p>
	<p><img class="aligncenter size-full wp-image-6427" src="http://blog.spaziogis.it/wp-content/uploads//2014/10/pai_folder.png" alt="pai_folder" width="277" height="163" /></p>
	<p>Qual è il significato del nome di questi file? Ne apro qualcuno, guardo un po&#8217; dentro e cerco di capire? Non credo possa essere così, e sicuramente non può essere solo così.</p>
	<p>Dati come questi devono essere pubblicati anche in maniera <strong>immediatamente comprensibile</strong> e <strong>leggibile</strong> da tutti: me, mia mamma, un giornalista, un pittore, un tecnico comunale, mio nipote il grande, il vicino di casa e financo da Gerlando.<br />
Solo come esempio, per quell&#8217;insieme di persone che ha accesso al web, una semplice <strong>mappa</strong> come <strong><a href="http://siciliahub.github.io/mappe/rischio_frane/">questa</a></strong> dà un&#8217;informazione che è subito comprensibile ad una platea vasta: dovo sono le aree a <strong>rischio frana</strong> in <strong>Sicilia</strong>, e qual è il grado di rischio.</p>
	<p><a target="_blank" href="http://siciliahub.github.io/mappe/rischio_frane/"><img border="0" class="aligncenter size-full wp-image-6428" src="http://blog.spaziogis.it/wp-content/uploads//2014/10/sicilia_rischio_frane_pai_t.jpg" alt="sicilia_rischio_frane_pai_t" width="500" height="288" /></a></p>
	<p>Non scrivo tutto questo per fare una critica al PAI, è un progetto che non conosco e che immagino essere di qualità.</p>
	<p>La barriera non è la presenza/assenza delle informazioni ma il loro scarso grado di <strong>utilizzabilità civica</strong>. Sarebbe auspicabile una collaborazione con la cittadinanza per trovare le modalità per superarla. Il risultato può essere proprio una mappa facilmente comprensibile da tutti.<br />
Si tratta di un problema molto più semplice di quello del rischio idrogeologico, cionondimeno affrontarlo e risolverlo sarebbe una <strong>scelta politica</strong> con benefici a catena per tutti.</p>
	<p>Invito la Regione Siciliana a costruire sul tema del rischio idrogeologico (e sul rischio in generale) una strategia di comunicazione e di informazione civica di qualità, senza barriere e ad ampio spettro.<br />
Ad <strong>aprire</strong> di più e meglio i <strong>dati</strong> relativi, in modo che possano essere realizzate analisi e rappresentazioni del tema che oggi nemmeno immaginiamo. La carta interattiva di sopra, è stata implementata grazie a 2 servizi aperti: quello messo a disposizione dal <a href="http://www.sitr.regione.sicilia.it/geoportale/it/metadata/details/159">Geoportale Regione Siciliana</a> (<em>special thanks</em> ad <a href="https://twitter.com/4g0st1n0">Agostino</a>) e l&#8217;ortofoto <a href="http://www.realvista.it/website/Joomla/">RealVista</a>.</p>
	<p>Una delle conseguenze dell&#8217;apertura dei dati è proprio quella di creare le precondizioni per <strong>raccontare meglio il proprio il territorio</strong>, in ciò per cui brilla e in ciò per cui è a rischio.<br />
E io di queste storie vorrei poterne leggere tante.</p>
	<p style="background-color: #eeeeff; border-radius: 5px 5px; -moz-border-radius: 5px 5px; -webkit-border-radius: 5px 5px; padding: 8px 8px 8px 8px; margin: 5px 0px 5px 0px; border: 1px solid #999999; font-family: Verdana,Arial,Helvetica,sans-serif; font-size: 80%;"><strong>NdR</strong>: questo articolo è pubblicato anche sul blog di <a href="http://opendatasicilia.it/" target="_blank">Open Data Sicilia</a>.</p>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2014/10/27/il-rischio-idrogeologico-la-regione-siciliana-e-linformazione-civica/">Il rischio idrogeologico, la Regione Siciliana e l&#8217;informazione civica</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2014/10/27/il-rischio-idrogeologico-la-regione-siciliana-e-linformazione-civica/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Il+rischio+idrogeologico%2C+la+Regione+Siciliana+e+l%26%238217%3Binformazione+civica&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Dati&amp;rft.source=TANTO&amp;rft.date=2014-10-27&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/10/27/il-rischio-idrogeologico-la-regione-siciliana-e-linformazione-civica/&amp;rft.language=English"></span>

		<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/10/pai_folder-150x150.png" />
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/10/pai_folder.png" medium="image">
			<media:title type="html">pai_folder</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/10/pai_folder-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/10/sicilia_rischio_frane_pai_t.jpg" medium="image">
			<media:title type="html">sicilia_rischio_frane_pai_t</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/10/sicilia_rischio_frane_pai_t-150x150.jpg" />
		</media:content>
	</item>
		<item>
		<title>La Regione Siciliana autorizza il ricalco in OpenStreetMap sulle ortofoto di sua proprietà</title>
		<link>http://blog.spaziogis.it/2014/09/15/la-regione-siciliana-autorizza-il-ricalco-in-openstreetmap-sulle-ortofoto-di-sua-proprieta/</link>
		<comments>http://blog.spaziogis.it/2014/09/15/la-regione-siciliana-autorizza-il-ricalco-in-openstreetmap-sulle-ortofoto-di-sua-proprieta/#comments</comments>
		<pubDate>Mon, 15 Sep 2014 13:38:20 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Dati]]></category>
		<category><![CDATA[Cartografia]]></category>
		<category><![CDATA[openstreetmap]]></category>
		<category><![CDATA[ortofoto]]></category>
		<category><![CDATA[sicilia]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6396</guid>
		<description><![CDATA[	
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=La+Regione+Siciliana+autorizza+il+ricalco+in+OpenStreetMap+sulle+ortofoto+di+sua+propriet%C3%A0&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Dati&amp;rft.source=TANTO&amp;rft.date=2014-09-15&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/09/15/la-regione-siciliana-autorizza-il-ricalco-in-openstreetmap-sulle-ortofoto-di-sua-proprieta/&amp;rft.language=English"></span>
Questo post non avrebbe bisogno di un testo o di un commento. E&#8217; in fondo una comunicazione di servizio. Le cose avvengono grazie al tempo che spendiamo per queste, alla crescita personale, all&#8217;evoluzione del contesto, agli incontri fatti, alla qualità delle persone. E questo è un anno che non dimenticherò. Ringrazio l&#8217;Ing. Salvatore Cirone (dirigente [...]]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=La+Regione+Siciliana+autorizza+il+ricalco+in+OpenStreetMap+sulle+ortofoto+di+sua+propriet%C3%A0&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Dati&amp;rft.source=TANTO&amp;rft.date=2014-09-15&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/09/15/la-regione-siciliana-autorizza-il-ricalco-in-openstreetmap-sulle-ortofoto-di-sua-proprieta/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<p>Questo post non avrebbe bisogno di un testo o di un commento. E&#8217; in fondo una comunicazione di servizio.</p>
	<p>Le cose avvengono grazie al tempo che spendiamo per queste, alla <strong>crescita</strong> personale, all&#8217;<strong>evoluzione</strong> del contesto, agli <strong>incontri</strong> fatti, alla qualità delle <strong>persone</strong>. E questo è un anno che non dimenticherò.</p>
	<p>Ringrazio l&#8217;Ing. <strong>Salvatore Cirone</strong> (dirigente dell&#8217;&#8221;Area 2 Interdipartimentale Sistemi Informativi Geografici, Infrastruttura Dati Territoriali Regionali e Cartografia&#8221;) e l&#8217;Ing. <strong>Agostino Cirasa</strong> (funzionario presso gli stessi uffici) per il dialogo di queste settimane e per l’immediata disponibilità all’autorizzazione, e <strong>Simone Cortesi</strong> che mi ha insegnato a passare la cera.</p>
	<p><img class="aligncenter" src="https://draftin.com:443/images/20927?token=EG-VP9B3-5etBlrZlCoOcPBUlcCnRWAsZ_NZ2d84sz9y9pQJbZlSU_cIM90h6Ob7BePoatRkctP3nZi_0rfkXaE" alt="2014-09-15_14h50_47.png" /></p>
	<p>I servizi <strong>WMS</strong> da sfruttare per il ricalco, e i relativi metadati, dovrebbero essere quelle elencati qui: <a href="http://goo.gl/Hefwor" target="_blank">http://goo.gl/Hefwor</a></p>
	<p><a href="http://blog.spaziogis.it/wp-content/uploads//2014/09/Autorizzazione_OpenStreeMap.pdf" target="_blank">Qui</a> invece la copia della lettera di <strong>autorizzazione</strong>. Tutto questo si innesta in un percorso iniziato proprio con <strong><a href="http://wiki.openstreetmap.org/wiki/Sicilia/Comunit%C3%A0#Derivazione_dati" target="_blank">OpenStreetMap</a></strong> qualche anno fa, e che sarà probabilmente soltanto una delle tappe previste in termini di <strong>apertura</strong> dei <strong>dati geografici</strong> da parte della <strong>Regione Siciliana</strong>.
</p>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2014/09/15/la-regione-siciliana-autorizza-il-ricalco-in-openstreetmap-sulle-ortofoto-di-sua-proprieta/">La Regione Siciliana autorizza il ricalco in OpenStreetMap sulle ortofoto di sua proprietà</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2014/09/15/la-regione-siciliana-autorizza-il-ricalco-in-openstreetmap-sulle-ortofoto-di-sua-proprieta/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=La+Regione+Siciliana+autorizza+il+ricalco+in+OpenStreetMap+sulle+ortofoto+di+sua+propriet%C3%A0&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Dati&amp;rft.source=TANTO&amp;rft.date=2014-09-15&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/09/15/la-regione-siciliana-autorizza-il-ricalco-in-openstreetmap-sulle-ortofoto-di-sua-proprieta/&amp;rft.language=English"></span>

		<media:thumbnail url="http://blog.spaziogis.it443/images/20927?token=EG-VP9B3-5etBlrZlCoOcPBUlcCnRWAsZ_NZ2d84sz9y9pQJbZlSU_cIM90h6Ob7BePoatRkctP3nZi_0rfkXaE" />
		<media:content url="http://blog.spaziogis.it443/images/20927?token=EG-VP9B3-5etBlrZlCoOcPBUlcCnRWAsZ_NZ2d84sz9y9pQJbZlSU_cIM90h6Ob7BePoatRkctP3nZi_0rfkXaE" medium="image">
			<media:title type="html">2014-09-15_14h50_47.png</media:title>
		</media:content>
	</item>
		<item>
		<title>Si avverte la gentile clientela che c&#8217;è da spostare un&#8217;isola</title>
		<link>http://blog.spaziogis.it/2014/09/03/si-avverte-la-gentile-clientela-che-ce-da-spostare-unisola/</link>
		<comments>http://blog.spaziogis.it/2014/09/03/si-avverte-la-gentile-clientela-che-ce-da-spostare-unisola/#comments</comments>
		<pubDate>Wed, 03 Sep 2014 17:06:54 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Dati]]></category>
		<category><![CDATA[Bing]]></category>
		<category><![CDATA[Cartografia]]></category>
		<category><![CDATA[Linosa]]></category>
		<category><![CDATA[openstreetmap]]></category>
		<category><![CDATA[sicilia]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6377</guid>
		<description><![CDATA[Durante una vacanza nella meravigliosa Linosa scopro che l'isola si è spostata. Un breve post che vola rapidamente sulla tecnologia, le basi cartografiche, la propagazione dell'errore, i dati aperti e la cartografia partecipata.]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Si+avverte+la+gentile+clientela+che+c%26%238217%3B%C3%A8+da+spostare+un%26%238217%3Bisola&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Dati&amp;rft.source=TANTO&amp;rft.date=2014-09-03&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/09/03/si-avverte-la-gentile-clientela-che-ce-da-spostare-unisola/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<p>Sei anni fa scrissi un <a href="http://blog.spaziogis.it/2008/08/20/mobile-gmaps-unapplicazione-per-andare-in-vacanza-con-le-proprie-basi-cartografiche-web/" target="_blank">post</a>, prima di partire per una settimana di piacere a <strong>Linosa</strong>; stavolta questo paradiso terrestre mi ha ispirato un post di ritorno.</p>
	<p>Lo spunto di partenza di oggi è lo stesso di allora: creare per il mio <em>smartphone</em> una copia della <strong>cartografia digitale</strong> dell&#8217;isola, in modo che sia disponibile anche <em><strong>offline</strong></em>, visto che in loco la connettività è scarsa.<br />
Sono passati sei anni, un&#8217;enormità dal punto di vista tecnologico, e le modalità per farlo sono adesso davvero tante. Anche per questa ragione non parlerò di soluzioni, ma darò spazio a quello che è un vero e proprio scoop giornalistico: <strong>l&#8217;isola di Linosa deve essere spostata</strong>!</p>
	<p>Scopro questa cosa incredibile il 18 agosto, data del mio arrivo sul posto. Nelle prime ore noleggio uno <em>scooter</em>, sistemo i bagagli in casa e subito voglio fare il punto mappa. Perché l&#8217;alloggio è in una zona per me nuova, perché voglio scegliere dove fare il primo bagno, perché mi voglio fare un&#8217;idea della viabilità, ecc.<br />
Accendo il ricevitore GPS del mio <em>smartphone</em>, aspetto che venga calcolata la mia posizione, faccio partire la mia <em>app</em> e mi rendo subito conto di essere stato spostato a est di diverse decine di metri. Perché &#8220;carta canta&#8221;, non ci sono dubbi, e se il mio <em>smartphone</em> mi fa vedere il pallino in una certa posizione, sarà il mio maledetto telefonino &#8220;<a href="http://en.wikipedia.org/wiki/Rooting_(Android_OS)" target="_blank">roottato</a>&#8221; che funziona male. Ho pensato anche che il problema fosse della mia cartografia, ma avevo generato di proposito due basi <em>offline</em>, da due fonti diverse (<strong>Bing Maps</strong> di Microsoft e <strong>OpenStreetMap</strong>, e su entrambe riscontravo lo stesso problema.<br />
Riavvio il telefonino, salgo sulla moto per fare un primo giro, arrivo sul lungo mare, rifaccio il test precedente e non cambia nulla.</p>
	<p style="text-align: center;"><img class="aligncenter" src="https://draftin.com:443/images/20220?token=UwZMuDwTij407bCMjQR-9Y75MmQ1MiyYTwAO_bOzAGrLicCWGuwFMfhl0kNPLFWsqbUCdKj9-91UQlmud5UABVU" alt="PANO_20140825_104228.jpg" width="500" height="219" /></p>
	<p>Preso dalla sconforto decido di fare una passeggiata e <strong>registrare</strong> un tracciato GPS, in modo che di ritorno a Palermo possa fare con calma un po&#8217; di verifiche e capire che strani dati produce il mio cellulare (si usa più questa parola?). A registrazione terminata, voglio essere sicuro che tutto sia stato archiviato correttamente, apro la mia<em> app</em> di <em>tracking</em> in una zona coperta da connessione <em>web</em> e scopro che tutto sembra tornare a funzionare. Ma c&#8217;è una differenza, la mappa di base stavolta è <a href="http://www.sitr.regione.sicilia.it/geoportale/it/metadata/details/255">quella</a> del <strong>Geoportale della Regione Siciliana</strong>: che siano le altre basi il problema?</p>
	<p>Ho potuto verificare la cosa, alcuni giorni fa, al ritorno da Linosa. Avevo infatti bisogno di una connessione e di un <em>personal computer</em>.<br />
Ho creato una vista cartografica (<a href="http://leafletjs.com/" target="_blank">leaflet.js</a> + <a href="https://github.com/shramov/leaflet-plugins" target="_blank">Plugins by Pavel Shramov</a> + <a href="https://github.com/turban/Leaflet.Sync" target="_blank">Leaflet.Sync</a>) in cui mettere a confronto i tre <em>layer</em> cartografici citati, sui quali ho sovrapposto la registrazione del mio percorso GPS, che ho usato un po&#8217; come cartina al tornasole.</p>
	<p><img class="aligncenter" src="https://draftin.com:443/images/20221?token=0Gxg3iNV7FL9G70Ye7ov7NfF4OFAC-taNkiK3oQxfqt0ONPnl9YJAMT165qeRnSw-d_ghDHeU1KeCM1YGQJWzj0" alt="2014-08-29_21h31_29.jpg" width="500" height="261" /></p>
	<p>Come si vede dallo <em>screenshot</em> di sopra, la traccia GPS (in blu) è correttamente posizionata sul base della Regione Siciliana, mentre è spostata di diverse decine di metri a est su Bing Maps. E lo stesso (vedi sotto) vale per OpenStreetMap.<br />
<img class="aligncenter" src="https://draftin.com:443/images/20222?token=nJr3_UgYE4S9euaVmNp24u3z3rSZevs7TzlYhrfIbRnX7dcBUtjVnARXQxlkwK9SWoc1NtJzhQm3jNSI4U2MZlE" alt="2014-08-29_23h08_31.jpg" width="500" height="261" /></p>
	<p>Non poteva essere diversamente perché i dati OpenStreetMap derivano (almeno per la gran parte) probabilmente da un tracciamento sulla base Bing. La Microsoft infatti ha concesso da tempo il ricalco sul proprio layer satellitare per l&#8217;arricchimento del database OSM, ma qui purtroppo è entrato in gioco la propagazione dell&#8217;errore: la base Bing è (qui a Linosa) &#8220;registrata&#8221; male, e qualsiasi prodotto derivato erediterà questo problema.</p>
	<p>La vista cartografica dinamica interattiva con cui potrete testare la cosa in autonomia è accessibile qui: <a href="http://tanto.github.io/spostalinosa/" target="_blank">http://tanto.github.io/spostalinosa/</a><br />
Ho inserito anche un <em>pinpoint</em> fisso a centro mappa, in modo da fare anche confronti a occhio tra un elemento individuato sulle due tavole.</p>
	<p>Non ho idea di come sia possibile che i dati della multinazionale contengano questo errore, ma di certo &#8220;c&#8217;è da spostare Linosa&#8221;. A chi mi posso rivolgere per segnalare la cosa?<br />
I dati OpenStreetMap saranno corretti in pochissimo tempo, per quelli di Bing temo ci vorrà più tempo: che grande cosa che è la &#8220;<strong>mappa liberamente modificabile dell&#8217;intero pianeta</strong>&#8220;!</p>
	<p>Ho fatto leggere il post in bozza a questa redazione e a qualche altro amico. Sono usciti molti spunti &#8220;vicini&#8221; al bel <a href="http://blog.spaziogis.it/2014/09/01/follia-di-mezza-estate/" target="_blank">post</a> di <strong>Sergio</strong>, di cui un po&#8217; questo è un figlio casuale, e anche uno dei mille &#8220;casi d&#8217;uso&#8221;.<br />
Voglio concludere proprio con tre elementi che ho raccolto:</p>
	<ul id="draft_check_box_list_0">
	<li>la mappa non è il <strong>territorio<em> </em></strong>(me l&#8217;ha detto tempo fa Franco Farinelli e me l&#8217;ha ripetuto in questi giorni napo);</li>
	<li>la <strong>cartografia della PA italiana</strong> è spesso di alto livello, è una grande risorsa e bisogna liberarla. Alla mia regione chiedo di lavorare sul passaggio ad una licenza che consenta pienamente il <strong>riuso dei dati</strong>, dalla attuale <a href="https://creativecommons.org/licenses/by-sa/3.0/it/" target="_blank">CC BY-SA 3.0 IT</a> a una <a href="https://creativecommons.org/licenses/by/4.0/deed.it" target="_blank">CC BY 4.0</a>;</li>
	<li>in ultimo l&#8217;invito a non credere acriticamente né ai nostri strumenti, né ai dati a cui accediamo tramite questi, ad alzare la testa dallo <em>smartphone</em> e camminare un po&#8217; più con lo <strong>sguardo aperto</strong> e rivolto in tutte le direzioni (lo so, lo so, si vede che è un&#8217;autocritica <img src='http://blog.spaziogis.it/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' />  ).</li>
	</ul>
	<p style="background-color: #eeeeff; border-radius: 5px 5px; -moz-border-radius: 5px 5px; -webkit-border-radius: 5px 5px; padding: 8px 8px 8px 8px; margin: 5px 0px 5px 0px; border: 1px solid #999999; font-family: Verdana,Arial,Helvetica,sans-serif; font-size: 80%;"><strong>NdR</strong>: questo di Linosa non &egrave; un caso unico e isolato. Sembra che anche <strong><a href="http://gis.19327.n5.nabble.com/Shift-massivo-Sassi-di-Matera-td5816104.html" target="_blank">Matera</a></strong> sia da spostare.</p>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2014/09/03/si-avverte-la-gentile-clientela-che-ce-da-spostare-unisola/">Si avverte la gentile clientela che c&#8217;è da spostare un&#8217;isola</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2014/09/03/si-avverte-la-gentile-clientela-che-ce-da-spostare-unisola/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=Si+avverte+la+gentile+clientela+che+c%26%238217%3B%C3%A8+da+spostare+un%26%238217%3Bisola&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Dati&amp;rft.source=TANTO&amp;rft.date=2014-09-03&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/09/03/si-avverte-la-gentile-clientela-che-ce-da-spostare-unisola/&amp;rft.language=English"></span>

		<media:thumbnail url="http://blog.spaziogis.it443/images/20220?token=UwZMuDwTij407bCMjQR-9Y75MmQ1MiyYTwAO_bOzAGrLicCWGuwFMfhl0kNPLFWsqbUCdKj9-91UQlmud5UABVU" />
		<media:content url="http://blog.spaziogis.it443/images/20220?token=UwZMuDwTij407bCMjQR-9Y75MmQ1MiyYTwAO_bOzAGrLicCWGuwFMfhl0kNPLFWsqbUCdKj9-91UQlmud5UABVU" medium="image">
			<media:title type="html">PANO_20140825_104228.jpg</media:title>
		</media:content>
		<media:content url="http://blog.spaziogis.it443/images/20221?token=0Gxg3iNV7FL9G70Ye7ov7NfF4OFAC-taNkiK3oQxfqt0ONPnl9YJAMT165qeRnSw-d_ghDHeU1KeCM1YGQJWzj0" medium="image">
			<media:title type="html">2014-08-29_21h31_29.jpg</media:title>
		</media:content>
		<media:content url="http://blog.spaziogis.it443/images/20222?token=nJr3_UgYE4S9euaVmNp24u3z3rSZevs7TzlYhrfIbRnX7dcBUtjVnARXQxlkwK9SWoc1NtJzhQm3jNSI4U2MZlE" medium="image">
			<media:title type="html">2014-08-29_23h08_31.jpg</media:title>
		</media:content>
	</item>
		<item>
		<title>QGIS, relazioni, moduli e widget, illustrati con un semplice caso d&#8217;uso</title>
		<link>http://blog.spaziogis.it/2014/04/28/qgis-relazioni-e-widget-illustrati-con-un-semplice-caso-duso/</link>
		<comments>http://blog.spaziogis.it/2014/04/28/qgis-relazioni-e-widget-illustrati-con-un-semplice-caso-duso/#comments</comments>
		<pubDate>Mon, 28 Apr 2014 06:23:31 +0000</pubDate>
		<dc:creator>Andrea Borruso</dc:creator>
				<category><![CDATA[Didattica]]></category>
		<category><![CDATA[moduli]]></category>
		<category><![CDATA[qgis]]></category>
		<category><![CDATA[relazioni]]></category>
		<category><![CDATA[widget]]></category>

		<guid isPermaLink="false">http://blog.spaziogis.it/?p=6277</guid>
		<description><![CDATA[Le relazioni in QGIS consentono di sviluppare dei casi d’uso applicativi molto interessanti; una delle ragioni del post è quella di contribuire alla diffusione della conoscenza del tema.]]></description>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=QGIS%2C+relazioni%2C+moduli+e+widget%2C+illustrati+con+un+semplice+caso+d%26%238217%3Buso&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Didattica&amp;rft.source=TANTO&amp;rft.date=2014-04-28&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/04/28/qgis-relazioni-e-widget-illustrati-con-un-semplice-caso-duso/&amp;rft.language=English"></span>
			<content:encoded><![CDATA[	<p>Le <strong>relazioni </strong>in <strong>QGIS </strong>consentono di sviluppare dei casi d’uso applicativi molto interessanti; una delle ragioni del post è quella di contribuire alla diffusione della conoscenza del tema.</p>
	<h2>Il caso d’uso: le strade e la loro manutenzione</h2>
	<p>Immaginate di essere i gestori del network della rete stradale della vostra città e di volere utilizzare QGIS (insieme ad altri strumenti) per farlo. Avete quindi un layer cartografico con tutte le strade (e i relativi attributi) e la necessità di associare a questo il dataset delle manutenzioni che vengono realizzate nei vari componenti della rete.</p>
	<p>A seguire vedremo come gestire la cosa con QGIS, le relazioni e con il comodo supporto delle <strong>maschere </strong>di input personalizzabili.</p>
	<h2>Chiavi e relazione</h2>
	<p>Per mettere in relazione il dataset delle manutenzioni con quello delle strade, potrete usare il meccanismo classico delle <strong>chiavi</strong>.</p>
	<p>Il layer delle strade sarà caratterizzato da un campo con un codice identificativo numerico univoco per ogni strada &#8211; la <strong>chiave primaria</strong> - denominato nell’esempio di questo post “pkuid”.</p>
	<p>Il database delle manutenzioni &#8211; che è una semplice tabella senza alcun attributo spaziale &#8211; è composto dai campi &#8220;PK_UID&#8221;, &#8220;data&#8221;, &#8220;responsabile&#8221;, &#8220;compagnia&#8221;, &#8220;note&#8221;; aggiungeremo un campo che contenga il codice identificativo della strada a cui la manutezione è riferita. Questo campo farà da <strong>chiave esterna</strong> e si chiamerà &#8220;ce_pkuid&#8221;.</p>
	<p>Il nostro modello prevede, per semplicità, che ad ogni strada sia possibile associare una o più manutenzioni; una classica <strong>relazione </strong>1:N impostata sulle due chiavi numeriche di cui sopra.</p>
	<h2>Layer</h2>
	<p>Il layer delle strade ha la struttura sottostante, in cui sono stati introdotti dei campi per raccogliere il nome della Via, il relativo tipo (Corso, Viale, Via, ecc.) e il codice identificativo comunale.</p>
	<p><img class="alignnone size-full wp-image-6280 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image02.png" alt="image02" width="339" height="141" /></p>
	<p>Quello delle manutenzioni conterrà un codice identificativo numerico univoco per ogni elemento, un campo in cui inserire la data dell’intervento di manutenzione, il nome del responsabile, il nome della compagnia incaricata e un campo per le note.</p>
	<p><img class="alignnone size-full wp-image-6288 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image10.png" alt="image10" width="425" height="201" /></p>
	<h2>Definire la relazione</h2>
	<p>La relazione tra i due dataset si definisce a livello di “<strong>Proprietà di progetto</strong>”. Aperto il tab <strong>Relations </strong>si farà click su “Add Relation” e si imposteranno i seguenti parametri:</p>
	<ul>
	<li><strong>Name</strong>, per dare un nome alla relazione;</li>
	<li><strong>Referencing Layer (Child)</strong>,<strong> </strong>per il nome del layer che contiene la chiave esterna;</li>
	<li><strong>Referencing Field</strong>,<strong> </strong>per il nome della chiave esterna;</li>
	<li><strong>Referencing Layer (Parent)</strong>, per il nome del layer che contiene la chiave primaria;</li>
	<li><strong>Referencing Field</strong>,<strong> </strong>per il nome della chiave primaria;</li>
	<li><strong>Id</strong>, che viene usato internamente da QGIS, deve essere univoco e fa da indice della tabella di relazione tra chiave primaria e chiave esterna.</li>
	</ul>
	<p><img class="aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image00.png" alt="image00" width="500" height="288" /></p>
	<p>A relazione definita, questa apparirà nella finestra di dialogo:</p>
	<p><img class="alignnone size-full wp-image-6281 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image03.png" alt="image03" width="500" height="243" /></p>
	<h2>Moduli</h2>
	<p>Una volta definita la relazione, se ne avrà evidenza anche nel <strong>modulo </strong>di inserimento/modifica degli attributi del dataset delle strade. La visualizzazione a moduli in QGIS è molto utile per alcuni task di verifica ed inserimento dei dati, ed è molto <a href="http://www.qgis.org/it/docs/training_manual/create_vector_data/forms.html" target="_blank"><span style="color: #1155cc;"><span style="text-decoration: underline;">personalizzabile</span></span></a>.</p>
	<p><img class="alignnone size-full wp-image-6283 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image05.png" alt="image05" width="500" height="278" /></p>
	<p>La tabella della manutenzioni sarà visibile in un <strong>widget </strong>del modulo dello strade, e sopra questa saranno visibili cinque <strong>pulsanti</strong>:</p>
	<ol>
	<li>la <strong>matita</strong>, per attivare la modifica della tabella delle manutenzioni;</li>
	<li>il “<strong>+</strong>” per aggiungere un nuovo record alla tabella, che di default verrà associato all’elemento attivo del layer “strade”;</li>
	<li>il tasto “<strong>x</strong>” per cancellare il record selezionato della tabella “manutenzioni”;</li>
	<li>il tasto “<strong>catenella</strong>” che aprirà una nuova finestra di dialogo con il quale associare qualsiasi manutenzione presente alla strada corrente;</li>
	<li>il tasto “<strong>rompi</strong> <strong>catenella</strong>” che rimuoverà l’associazione tra la manutenzione selezionata e la strada corrente;</li>
	<li>ed infine, a destra, ci sono due pulsanti per passare dalla vista “tabella” a quella modulo.</li>
	</ol>
	<p>Anche per il dataset delle manutenzioni è possibile attivare il modulo di inserimento/modifica degli attributi, in modo che dia conto visivamente della relazione con il layer delle strade.</p>
	<p>A partire dalle proprietà del layer manutenzioni, bisognerà modificare il widget del campo che fa da chiave esterna.</p>
	<p><img class="alignnone size-full wp-image-6282 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image04.png" alt="image04" width="500" height="244" /></p>
	<p>E scegliere come tipo di widget “Relation Reference”, utilizzando i parametri visibili nella figura sottostante:</p>
	<p><img class="alignnone size-full wp-image-6286 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image08.png" alt="image08" width="500" height="433" /></p>
	<p>Una volta scelto questo speciale widget, sarà possibile leggere la relazione tra i due layer anche nel modulo delle manutezioni:</p>
	<p style="text-align: center;"><img src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image06.png" alt="image06" width="500" height="537" /></p>
	<h2>Note finali (riferimenti, file esempio e video demo)</h2>
	<p>Questo articolo è quasi una traduzione di <a href="http://blog.vitu.ch/10112013-1201/qgis-relations" target="_blank"><span style="color: #1155cc;"><span style="text-decoration: underline;">questo</span></span></a> di Matthias Kuhn. Sono caduto nel suo bel blog, perché tra i tipi di widget accessibili nelle proprietà dei campi di un layer ho scoperto il tipo “Relation Reference”. A me era completamente ignoto; ho provato a cercare nella <a href="http://www.qgis.org/en/docs/user_manual/working_with_vector/vector_properties.html#fields-menu" target="_blank"><span style="color: #1155cc;"><span style="text-decoration: underline;">documentazione</span></span></a>, senza però trovarne traccia. Il post di Matthias mi è sembrata una piccola perla e ho creduto utile clonarlo.</p>
	<p>Da <a href="http://blog.spaziogis.it/wp-content/uploads//2014/04/qgis_e_le_relazioni.zip"><span style="color: #1155cc;"><span>qui</span></span></a> potrete scaricare un <strong>file di progetto</strong> d’esempio basato su QGIS 2.2 e come formato dati su SpatiaLite. Questo ultimo farà da contenitore unico sia del file spaziale (le strade), che della tabella delle manutenzioni.</p>
	<p>Nel progetto, per i due moduli, ho impostato altri widget diversi da quello di default (“Line edit”); alcuni sono di grande comodità come quello per il campo “data” delle manutenzioni (widget di tipo “Calendar”), o l’elenco controllato del campo “Tipo” (widget di tipo “Value map”) del layer delle strade.</p>
	<p><img class="alignnone size-full wp-image-6294 aligncenter" src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image011.png" alt="image01" width="497" height="243" /></p>
	<p>Per chi vuole vedere la cosa in azione ho preparato un <a href="https://www.youtube.com/watch?v=KzLL0npcUN4&amp;feature=youtu.be&amp;hd=1" target="_blank"><span style="color: #1155cc;"><span><strong>piccolo video</strong></span></span></a>, che non ha alcuna pretesa didattica. Vuole essere soltanto una carrelata visuale rapida di alcune delle cose descritte in questo post.</p>
	<p><a href="https://www.youtube.com/watch?v=KzLL0npcUN4&amp;feature=youtu.be&amp;hd=1" target="_blank"><img class="alignnone size-full wp-image-6285 aligncenter" style="border: 0px;" src="http://blog.spaziogis.it/wp-content/uploads//2014/04/image07.png" alt="image07" width="500" height="305" /></a></p>
	<p>Un’ultima annotazione finale: il <strong>caso d’uso</strong> descritto è <strong>molto semplificato</strong> e non tiene conto di tutte i requisiti di un’applicazione complessa come la gestione di un network stradale. Mi è stato utile come esempio per scrivere di QGIS, relazioni, moduli e widget.</p>
	<p style="background-color: #eeeeff; border-radius: 5px 5px; -moz-border-radius: 5px 5px; -webkit-border-radius: 5px 5px; padding: 8px 8px 8px 8px; margin: 5px 0px 5px 0px; border: 1px solid #999999; font-family: Verdana,Arial,Helvetica,sans-serif; font-size: 80%;"><strong>NdR</strong>: <strong>Salvatore Fiandaca</strong>, prendendo spunto da questo post, ne ha creato una sorta di versione aggiornata che trovate <strong><a href="https://pigrecoinfinito.wordpress.com/2016/01/02/qgis-relazioni-moduli-widget-e-report/" target="_blank">qui</a></strong>. Ringraziamo Totò e consigliamo la lettura <img src='http://blog.spaziogis.it/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p style="border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;background-color:#ddd;border:1px solid #ccc;padding:5px;">L'articolo <a href="http://blog.spaziogis.it/2014/04/28/qgis-relazioni-e-widget-illustrati-con-un-semplice-caso-duso/">QGIS, relazioni, moduli e widget, illustrati con un semplice caso d&#8217;uso</a> &egrave; apparso originariamente su <a href="http://blog.spaziogis.it">TANTO</a>. Rispettane le <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">condizioni di licenza</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://blog.spaziogis.it/2014/04/28/qgis-relazioni-e-widget-illustrati-con-un-semplice-caso-duso/feed/</wfw:commentRss>
		<slash:comments>20</slash:comments>
		
	<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.title=QGIS%2C+relazioni%2C+moduli+e+widget%2C+illustrati+con+un+semplice+caso+d%26%238217%3Buso&amp;rft.aulast=Borruso&amp;rft.aufirst=Andrea&amp;rft.subject=Didattica&amp;rft.source=TANTO&amp;rft.date=2014-04-28&amp;rft.type=blogPost&amp;rft.format=text&amp;rft.identifier=http://blog.spaziogis.it/2014/04/28/qgis-relazioni-e-widget-illustrati-con-un-semplice-caso-duso/&amp;rft.language=English"></span>

		<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image02-150x141.png" />
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image02.png" medium="image">
			<media:title type="html">image02</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image02-150x141.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image10.png" medium="image">
			<media:title type="html">image10</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image10-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image00.png" medium="image">
			<media:title type="html">image00</media:title>
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image03.png" medium="image">
			<media:title type="html">image03</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image03-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image05.png" medium="image">
			<media:title type="html">image05</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image05-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image04.png" medium="image">
			<media:title type="html">image04</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image04-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image08.png" medium="image">
			<media:title type="html">image08</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image08-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image06.png" medium="image">
			<media:title type="html">image06</media:title>
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image011.png" medium="image">
			<media:title type="html">image01</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image011-150x150.png" />
		</media:content>
		<media:content url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image07.png" medium="image">
			<media:title type="html">image07</media:title>
			<media:thumbnail url="http://blog.spaziogis.it/wp-content/uploads//2014/04/image07-150x150.png" />
		</media:content>
	</item>
	</channel>
</rss>
